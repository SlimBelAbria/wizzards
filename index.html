<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wizard Score Tracker</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #fafafa;
            --surface: #ffffff;
            --border: #e5e7eb;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: manipulation;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        /* Header */
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1rem 0;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            letter-spacing: -0.025em;
        }
        
        header p {
            font-size: 1.125rem;
            color: var(--text-light);
            font-weight: 500;
        }
        
        /* Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            background: var(--surface);
            padding: 0.5rem;
            border-radius: 1rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
        
        .nav-tab {
            padding: 0.75rem 1.25rem;
            border: none;
            background: transparent;
            color: var(--text-light);
            font-weight: 600;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            min-width: 100px;
        }
        
        .nav-tab:hover {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }
        
        .nav-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }
        
        /* Main Content */
        .main-content {
            background: var(--surface);
            border-radius: 1rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
            overflow: hidden;
        }
        
        .content-section {
            display: none;
            padding: 1.5rem;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Section Headers */
        .section-header {
            margin-bottom: 1.5rem;
        }
        
        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 0.5rem;
        }
        
        .section-header p {
            color: var(--text-light);
            font-size: 1rem;
        }
        
        /* Player Inputs */
        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .player-input {
            position: relative;
        }
        
        .player-input label {
            display: block;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .player-input input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: all 0.2s ease;
            background: var(--surface);
        }
        
        .player-input input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        /* Game Settings */
        .settings-card {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }
        
        .settings-card h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 1rem;
        }
        
        /* Game Mode Cards */
        .mode-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .mode-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 1rem;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            text-align: center;
        }
        
        .mode-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .mode-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(139, 92, 246, 0.05));
            box-shadow: var(--shadow-lg);
        }
        
        .mode-icon {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
            display: block;
        }
        
        .mode-title {
            font-weight: 700;
            color: var(--text);
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }
        
        .mode-desc {
            font-size: 0.8125rem;
            color: var(--text-light);
            margin-bottom: 0.75rem;
        }
        
        .mode-stats {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        
        .stat {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .help-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            border: none;
            font-size: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .help-btn:hover {
            background: #d97706;
            transform: scale(1.1);
        }
        
        /* Form Controls */
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 0.75rem;
            font-size: 1rem;
            background: var(--surface);
            transition: all 0.2s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: 44px; /* Better touch target */
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--surface);
            color: var(--text);
            border: 2px solid var(--border);
        }
        
        .btn-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        .btn-accent {
            background: var(--accent);
            color: white;
        }
        
        .btn-accent:hover {
            background: #d97706;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* Game Board */
        .game-board {
            background: var(--surface);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .round-info {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.25rem;
            border-radius: 1rem;
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: 700;
            font-size: 1.125rem;
        }
        
        /* Scoreboard */
        .scoreboard {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            background: var(--surface);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        .scoreboard th {
            background: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
        }
        
        .scoreboard td {
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }
        
        .scoreboard tr:last-child td {
            border-bottom: none;
        }
        
        .scoreboard tr:hover {
            background: rgba(99, 102, 241, 0.05);
        }
        
        /* Phase Headers */
        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.25rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 1rem;
            border: 1px solid var(--border);
        }
        
        .phase-header h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
            margin: 0;
        }
        
        .phase-indicator {
            display: flex;
            gap: 0.5rem;
        }
        
        .phase-dot {
            width: 0.75rem;
            height: 0.75rem;
            border-radius: 50%;
            background: var(--border);
            transition: all 0.2s ease;
        }
        
        .phase-dot.active {
            background: var(--success);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
        }
        
        /* Instructions */
        .instructions {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            border-radius: 1rem;
            padding: 1.25rem;
            margin-bottom: 1.25rem;
        }
        
        .instructions p {
            margin: 0 0 1rem 0;
            font-weight: 600;
            color: var(--text);
        }
        
        .tips {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .tip {
            font-size: 0.875rem;
            color: var(--text);
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 0.5rem;
            border-left: 3px solid var(--accent);
        }
        
        /* Player Cards */
        .player-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            transition: all 0.2s ease;
        }
        
        .player-card:hover {
            box-shadow: var(--shadow-lg);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        
        .player-name {
            font-weight: 700;
            color: var(--text);
            font-size: 1.125rem;
        }
        
        .bid-info {
            background: var(--accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.875rem;
        }
        
        /* Interactive Buttons */
        .interactive-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            border: 2px solid var(--border);
            background: var(--surface);
            color: var(--text);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0 0.25rem;
            -webkit-tap-highlight-color: transparent; /* Remove default mobile tap highlight */
            touch-action: manipulation; /* Optimize for touch */
            user-select: none; /* Prevent text selection */
        }
        
        .interactive-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .interactive-btn.active {
            background: var(--success);
            color: white;
            border-color: var(--success);
            transform: scale(1.1);
        }
        
        .interactive-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: scale(1.1);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        
        /* Button Container */
        .button-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        /* Total Display */
        .total-display {
            margin-top: 1.25rem;
            padding: 1rem 1.25rem;
            border-radius: 1rem;
            text-align: center;
            font-weight: 700;
            font-size: 1.125rem;
        }
        
        .total-display.valid {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }
        
        .total-display.invalid {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }
        
        .total-display.neutral {
            background: linear-gradient(135deg, var(--accent), #d97706);
            color: white;
        }
        
        /* Dealer Info */
        .dealer-info {
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .dealer-badge {
            background: linear-gradient(135deg, var(--accent), #d97706);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 1rem;
            display: inline-block;
            box-shadow: var(--shadow);
        }
        
        /* Winner Banner */
        .winner-banner {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem;
            border-radius: 1rem;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 1.5rem 0;
            display: none;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal {
            background: var(--surface);
            border-radius: 1rem;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border);
        }
        
        .modal-header {
            background: var(--primary);
            color: white;
            padding: 1.25rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin: 0;
        }
        
        .close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.25rem;
            transition: all 0.2s ease;
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .modal-content {
            padding: 1.5rem;
            max-height: 60vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Notifications */
        .notification-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 400px;
        }
        
        .notification {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.25rem;
            box-shadow: var(--shadow-xl);
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .notification.success {
            border-left: 4px solid var(--success);
        }
        
        .notification.error {
            border-left: 4px solid var(--danger);
        }
        
        .notification.warning {
            border-left: 4px solid var(--warning);
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        
        .notification-title {
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .notification-close {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.25rem;
            padding: 0.25rem;
            border-radius: 0.25rem;
            transition: all 0.2s ease;
        }
        
        .notification-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: var(--danger);
        }
        
        .notification-message {
            color: var(--text);
            line-height: 1.5;
            margin: 0;
        }
        
        /* Rules Content */
        .rules-content h3 {
            color: var(--primary);
            margin: 1.5rem 0 1rem 0;
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .rules-content ul {
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .rules-content li {
            margin-bottom: 0.5rem;
            color: var(--text);
        }
        
        /* Credit Section */
        .credit-section {
            text-align: center;
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--surface);
            border-radius: 1rem;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }
        
        .credit-text {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-light);
        }
        
        /* Mobile Menu Button */
        #mobileMenuBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            z-index: 100;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            font-size: 1.5rem;
        }
        
        /* Loading Indicator */
        #mobileLoading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile Notification */
        .mobile-notification {
            position: fixed;
            bottom: 20px;
            left: 10px;
            right: 10px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            z-index: 10000;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .mobile-notification.success {
            background: var(--success);
            color: white;
        }
        
        .mobile-notification.error {
            background: var(--danger);
            color: white;
        }
        
        .mobile-notification.info {
            background: var(--primary);
            color: white;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0.75rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            header {
                padding: 1rem 0;
                margin-bottom: 1.5rem;
            }
            
            .nav-tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
                padding: 0.5rem;
                justify-content: flex-start;
            }
            
            .nav-tab {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
                min-width: 100px;
            }
            
            .content-section {
                padding: 1rem;
            }
            
            .player-grid {
                grid-template-columns: 1fr;
            }
            
            .player-input input {
                padding: 1rem;
            }
            
            .mode-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .btn {
                width: 100%;
                padding: 1rem;
                font-size: 1rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .interactive-btn {
                width: 3.5rem;
                height: 3.5rem;
                font-size: 1.2rem;
                margin: 0 0.5rem;
                min-width: 44px; /* Ensure minimum touch target size */
                min-height: 44px;
            }
            
            .scoreboard th, 
            .scoreboard td {
                padding: 0.75rem 0.5rem;
                font-size: 0.9rem;
            }
            
            .phase-header {
                flex-direction: column;
                gap: 0.75rem;
                text-align: center;
            }
            
            .modal {
                width: 95%;
                max-height: 90vh;
            }
            
            /* Show mobile menu button on very small screens */
            @media (max-width: 480px) {
                .nav-tabs {
                    display: none;
                    flex-direction: column;
                    position: fixed;
                    bottom: 90px;
                    right: 20px;
                    background: white;
                    border-radius: 1rem;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 99;
                    max-height: 300px;
                    overflow-y: auto;
                }
                
                .nav-tabs.show {
                    display: flex;
                }
                
                #mobileMenuBtn {
                    display: block;
                }
                
                .mode-grid {
                    grid-template-columns: 1fr;
                }
            }
        }
        
        @media (max-width: 400px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .player-input input {
                padding: 0.9rem;
            }
            
            .interactive-btn {
                width: 3rem;
                height: 3rem;
                font-size: 1rem;
                margin: 0 0.25rem;
                min-width: 44px; /* Ensure minimum touch target size */
                min-height: 44px;
            }
        }
        
        /* Landscape orientation */
        @media (max-height: 500px) and (orientation: landscape) {
            .container {
                padding: 0.5rem;
            }
            
            .player-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .game-board {
                padding: 0.75rem;
            }
            
            .interactive-btn {
                width: 2.75rem;
                height: 2.75rem;
                font-size: 0.9rem;
            }
        }
        
        /* Animations */
        @keyframes slideIn {
            from { 
                transform: translateY(-20px);
                opacity: 0;
            }
            to { 
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        
        /* Help Modal Content Styling */
        .modal-content h4 {
            color: var(--primary);
            margin: 1.5rem 0 1rem 0;
            font-size: 1.125rem;
            font-weight: 700;
        }
        
        .modal-content p {
            color: var(--text);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .modal-content ul {
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .modal-content li {
            margin-bottom: 0.5rem;
            color: var(--text);
        }
        
        .example-box {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.25rem;
            margin: 1.25rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .example-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .example-box strong {
            color: var(--primary);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Wizard Score Tracker</h1>
            <p>Master the magical card game with precision scoring</p>
        </header>
        
        <nav class="nav-tabs">
            <button class="nav-tab active" data-mode="setup">New Game</button>
            <button class="nav-tab" data-mode="play">Current Game</button>
            <button class="nav-tab" data-mode="rules">Rules</button>
        </nav>
        
        <button id="mobileMenuBtn">☰</button>
        
        <main class="main-content">
            <div class="content-section setup-section active">
                <div class="section-header">
                    <h2>Start a New Game</h2>
                    <p>Enter player names and configure your game settings</p>
                </div>
                
                <div class="player-grid">
                    <div class="player-input">
                        <label for="player1">Player 1</label>
                        <input type="text" id="player1" placeholder="Enter name">
                    </div>
                    <div class="player-input">
                        <label for="player2">Player 2</label>
                        <input type="text" id="player2" placeholder="Enter name">
                    </div>
                    <div class="player-input">
                        <label for="player3">Player 3</label>
                        <input type="text" id="player3" placeholder="Enter name">
                    </div>
                    <div class="player-input">
                        <label for="player4">Player 4</label>
                        <input type="text" id="player4" placeholder="Enter name">
                    </div>
                </div>
                
                <div class="settings-card">
                    <h3>Game Configuration</h3>
                    
                    <div class="form-group">
                        <label>Game Mode</label>
                        <div class="mode-grid">
                            <div class="mode-card selected" data-mode="classic">
                                <span class="mode-icon">🃏</span>
                                <div class="mode-title">Classic</div>
                                <div class="mode-desc">Traditional scoring</div>
                                <div class="mode-stats">
                                    <span class="stat">20 + 10×bid</span>
                                    <span class="stat">-10×diff</span>
                                </div>
                                <button class="help-btn" data-mode="classic">?</button>
                            </div>
                            <div class="mode-card" data-mode="quick">
                                <span class="mode-icon">⚡</span>
                                <div class="mode-title">Quick Play</div>
                                <div class="mode-desc">Fast & furious</div>
                                <div class="mode-stats">
                                    <span class="stat">15 + 8×bid</span>
                                    <span class="stat">-8×diff</span>
                                </div>
                                <button class="help-btn" data-mode="quick">?</button>
                            </div>
                            <div class="mode-card" data-mode="expert">
                                <span class="mode-icon">🧙‍♂️</span>
                                <div class="mode-title">Expert</div>
                                <div class="mode-desc">High stakes</div>
                                <div class="mode-stats">
                                    <span class="stat">25 + 12×bid</span>
                                    <span class="stat">-15×diff</span>
                                </div>
                                <button class="help-btn" data-mode="expert">?</button>
                            </div>
                            <div class="mode-card" data-mode="team">
                                <span class="mode-icon">🤝</span>
                                <div class="mode-title">Team Play</div>
                                <div class="mode-desc">Collaborative</div>
                                <div class="mode-stats">
                                    <span class="stat">20 + 10×bid</span>
                                    <span class="stat">-10×diff</span>
                                </div>
                                <button class="help-btn" data-mode="team">?</button>
                            </div>
                            <div class="mode-card" data-mode="tournament">
                                <span class="mode-icon">🏆</span>
                                <div class="mode-title">Tournament</div>
                                <div class="mode-desc">Ultimate challenge</div>
                                <div class="mode-stats">
                                    <span class="stat">30 + 15×bid</span>
                                    <span class="stat">-20×diff</span>
                                </div>
                                <button class="help-btn" data-mode="tournament">?</button>
                            </div>
                        </div>
                        <input type="hidden" id="gameModeSelect" value="classic">
                    </div>
                    
                    <div class="form-group">
                        <label for="roundsSelect">Number of Rounds</label>
                        <select id="roundsSelect" class="form-control">
                            <option value="auto">Auto (60 ÷ players)</option>
                            <option value="10">10 Rounds</option>
                            <option value="15">15 Rounds</option>
                            <option value="20">20 Rounds</option>
                            <option value="30">30 Rounds</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="customRoundsGroup" style="display: none;">
                        <label for="customRounds">Custom Rounds</label>
                        <input type="number" id="customRounds" min="1" max="60" value="10" class="form-control">
                    </div>
                    
                    <div class="form-group" id="teamSettings" style="display: none;">
                        <label for="teamSize">Team Size</label>
                        <select id="teamSize" class="form-control">
                            <option value="2">2 players per team</option>
                            <option value="3">3 players per team</option>
                        </select>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button id="addPlayerBtn" class="btn btn-secondary">Add Player</button>
                    <button id="startGameBtn" class="btn btn-primary">Start Game</button>
                </div>
            </div>
            
            <div class="content-section play-section">
                <div class="game-board">
                    <div class="dealer-info">
                        <div class="dealer-badge">
                            🃏 Dealer: <span id="currentDealer">Player 1</span>
                        </div>
                    </div>
                    
                    <table class="scoreboard">
                        <thead>
                            <tr>
                                <th>Player</th>
                                <th>Round <span id="currentRoundTable">1</span> Bid</th>
                                <th>Tricks</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody id="scoreboardBody">
                            <!-- Scores will be populated here -->
                        </tbody>
                    </table>
                    
                    <div id="biddingPhase">
                        <div class="phase-header">
                            <h3>🎲 Bidding Phase</h3>
                            <div class="phase-indicator">
                                <span class="phase-dot active"></span>
                                <span class="phase-dot"></span>
                            </div>
                        </div>
                        
                        <div id="bidInputs"></div>
                    </div>
                    
                    <div id="playingPhase" style="display: none;">
                        <div class="phase-header">
                            <h3>🎯 Playing Phase</h3>
                            <div class="phase-indicator">
                                <span class="phase-dot active"></span>
                                <span class="phase-dot"></span>
                            </div>
                        </div>
                        
                        <div id="trickInputs"></div>
                    </div>
                    
                    <div class="btn-group">
                        <button id="submitBidsBtn" class="btn btn-primary">Submit Bids</button>
                        <button id="calculateRoundBtn" class="btn btn-primary" style="display: none;">Calculate Round</button>
                        <button id="nextRoundBtn" class="btn btn-accent" style="display: none;">Next Round</button>
                        <button id="endGameBtn" class="btn btn-danger">End Game</button>
                    </div>
                    
                    <div id="winnerBanner" class="winner-banner"></div>
                    <div id="gameEndActions" class="btn-group" style="display: none;">
                        <button id="clearGameBtn" class="btn btn-secondary">Clear Game</button>
                    </div>
                </div>
            </div>
            
            <div class="content-section rules-section">
                <div class="section-header">
                    <h2>Wizard Card Game Rules</h2>
                    <p>Learn how to play and master the game</p>
                </div>
                
                <div class="rules-content">
                    <h3>Objective</h3>
                    <p>Wizard is a trick-taking game where players predict how many tricks they'll win each round. Score points by making accurate bids!</p>
                    
                    <h3>Setup</h3>
                    <ul>
                        <li>Use a standard 52-card deck plus 4 Wizard ★ and 4 Jester 🃏 cards</li>
                        <li>3-6 players (best with 4-6)</li>
                        <li>Game lasts for 60 cards ÷ number of players (e.g., 15 rounds for 4 players)</li>
                    </ul>
                    
                    <h3>Gameplay</h3>
                    <ul>
                        <li>Each round has two phases: <strong>Bidding</strong> and <strong>Playing</strong></li>
                        <li>Deal 1 card in Round 1, 2 in Round 2, up to the maximum</li>
                        <li>After dealing, players bid how many tricks they'll win (can bid 0)</li>
                        <li><strong>Important:</strong> The sum of all bids cannot equal the round number</li>
                        <li>Play proceeds clockwise, following suit if possible</li>
                    </ul>
                    
                    <h3>Card Hierarchy</h3>
                    <ul>
                        <li><strong>Wizard ★:</strong> Highest card, wins any trick automatically</li>
                        <li><strong>Jester 🃏:</strong> Lowest card, cannot win any trick</li>
                        <li>Standard cards rank A (high), K, Q, J, 10-2 (low)</li>
                        <li>Trump suit (determined by first card of the round) beats all non-Wizard cards</li>
                    </ul>
                    
                    <h3>Game Modes</h3>
                    <ul>
                        <li><strong>Classic Wizard:</strong> Standard scoring (20 + 10×bid if correct, -10×difference if wrong)</li>
                        <li><strong>Quick Play:</strong> Faster scoring (15 + 8×bid if correct, -8×difference if wrong) - 10 rounds</li>
                        <li><strong>Expert Mode:</strong> Higher stakes (25 + 12×bid if correct, -15×difference if wrong)</li>
                        <li><strong>Team Play:</strong> Play in teams with shared scoring</li>
                        <li><strong>Tournament:</strong> Maximum scoring (30 + 15×bid if correct, -20×difference if wrong) - 30 rounds</li>
                    </ul>
                    
                    <h3>Scoring</h3>
                    <ul>
                        <li><strong>Correct bid:</strong> Base points + bonus points per trick won</li>
                        <li><strong>Incorrect bid:</strong> Lose points for each trick over or under</li>
                        <li>Example (Classic): Bid 3 and win 3 → 50 points (20 + 30)</li>
                        <li>Example (Classic): Bid 2 and win 4 → -20 points (10 × -2)</li>
                    </ul>
                    
                    <h3>Winning</h3>
                    <p>The player with the highest score after all rounds wins the game!</p>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-secondary back-to-game-btn">Back to Game</button>
                </div>
            </div>
        </main>
        
        <div class="credit-section">
            <div class="credit-text">Made by Slim Bel Abria</div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div id="helpModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Game Mode Help</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-content" id="modalContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>
    
    <!-- Mobile Loading Indicator -->
    <div id="mobileLoading">
        <div class="loading-content">
            <div style="font-size: 1.5rem; margin-bottom: 1rem;">Loading...</div>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <script>
        // Mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navTabs = document.querySelector('.nav-tabs');
            
            if (window.innerWidth <= 480) {
                mobileMenuBtn.style.display = 'block';
                navTabs.style.display = 'none';
                
                mobileMenuBtn.addEventListener('click', function() {
                    if (navTabs.style.display === 'none') {
                        navTabs.style.display = 'flex';
                        mobileMenuBtn.textContent = '✕';
                    } else {
                        navTabs.style.display = 'none';
                        mobileMenuBtn.textContent = '☰';
                    }
                });
            }
            
            window.addEventListener('resize', function() {
                if (window.innerWidth <= 480) {
                    mobileMenuBtn.style.display = 'block';
                    navTabs.style.display = 'none';
                } else {
                    mobileMenuBtn.style.display = 'none';
                    navTabs.style.display = 'flex';
                }
            });
        });

        // Mobile touch feedback
        function setupMobileInteractions() {
            const buttons = document.querySelectorAll('button, .interactive-btn, .mode-card');
            buttons.forEach(btn => {
                btn.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                    if (navigator.vibrate) {
                        navigator.vibrate(30);
                    }
                });
                
                btn.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
            
            // Prevent zooming on double-tap
            document.addEventListener('dblclick', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            // Better handling of keyboard on mobile
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                });
            });
        }

        // Mobile notification system
        function showMobileNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `mobile-notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
                notification.style.opacity = '1';
            }, 50);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(100px)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Adaptive notification system
        function showAdaptiveNotification(message, type = 'info', duration = 3000) {
            if (window.innerWidth <= 768) {
                showMobileNotification(message, type);
            } else {
                showNotification(message, type, duration);
            }
        }

        // Original notification system
        function showNotification(message, type = 'info', duration = 5000) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icons = {
                success: '✅',
                error: '❌',
                warning: '⚠️',
                info: 'ℹ️'
            };
            
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">
                        ${icons[type]} ${type.charAt(0).toUpperCase() + type.slice(1)}
                    </div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">×</button>
                </div>
                <p class="notification-message">${message}</p>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            if (duration > 0) {
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 400);
                }, duration);
            }
        }
        
        // Game state
        const gameState = {
            players: [],
            currentRound: 1,
            totalRounds: 10,
            bids: {},
            tricks: {},
            scores: {},
            gamePhase: 'bidding',
            gameStarted: false,
            gameMode: 'classic',
            teamSize: 2
        };

        // DOM elements
        const navTabs = document.querySelectorAll('.nav-tab');
        const setupSection = document.querySelector('.setup-section');
        const playSection = document.querySelector('.play-section');
        const rulesSection = document.querySelector('.rules-section');
        const addPlayerBtn = document.getElementById('addPlayerBtn');
        const startGameBtn = document.getElementById('startGameBtn');
        const scoreboardBody = document.getElementById('scoreboardBody');
        const bidInputs = document.getElementById('bidInputs');
        const trickInputs = document.getElementById('trickInputs');
        const submitBidsBtn = document.getElementById('submitBidsBtn');
        const calculateRoundBtn = document.getElementById('calculateRoundBtn');
        const nextRoundBtn = document.getElementById('nextRoundBtn');

        const winnerBanner = document.getElementById('winnerBanner');
        const gameEndActions = document.getElementById('gameEndActions');
        const endGameBtn = document.getElementById('endGameBtn');
        const clearGameBtn = document.getElementById('clearGameBtn');
        const backToGameBtns = document.querySelectorAll('.back-to-game-btn');
        const gameModeSelect = document.getElementById('gameModeSelect');
        const modeCards = document.querySelectorAll('.mode-card');
        const roundsSelect = document.getElementById('roundsSelect');
        const customRoundsGroup = document.getElementById('customRoundsGroup');
        const customRoundsInput = document.getElementById('customRounds');
        const teamSettings = document.getElementById('teamSettings');
        const teamSizeSelect = document.getElementById('teamSize');
        const helpModal = document.getElementById('helpModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const closeModal = document.getElementById('closeModal');
        const helpBtns = document.querySelectorAll('.help-btn');
        const mobileLoading = document.getElementById('mobileLoading');

        // Initialize from localStorage
        function loadGame() {
            const savedGame = localStorage.getItem('wizardGame');
            if (savedGame) {
                showLoading(true);
                setTimeout(() => {
                    const parsed = JSON.parse(savedGame);
                    Object.assign(gameState, parsed);
                    gameState.gameStarted = true;
                    
                    updateScoreboard();
                    
                    if (gameState.gamePhase === 'playing') {
                        showPlayingPhase();
                    }
                    
                    showSection('play');
                    
                    if (gameState.currentRound > gameState.totalRounds) {
                        declareWinner();
                    }
                    showLoading(false);
                }, 500);
            }
        }

        // Show/hide loading indicator
        function showLoading(show) {
            if (show) {
                mobileLoading.style.display = 'flex';
            } else {
                mobileLoading.style.display = 'none';
            }
        }

        // Save game to localStorage
        function saveGame() {
            localStorage.setItem('wizardGame', JSON.stringify(gameState));
        }

        // Switch between sections
        function showSection(section) {
            setupSection.classList.remove('active');
            playSection.classList.remove('active');
            rulesSection.classList.remove('active');
            
            navTabs.forEach(btn => btn.classList.remove('active'));
            
            if (section === 'setup') {
                setupSection.classList.add('active');
                document.querySelector('[data-mode="setup"]').classList.add('active');
            } else if (section === 'play') {
                playSection.classList.add('active');
                document.querySelector('[data-mode="play"]').classList.add('active');
            } else if (section === 'rules') {
                rulesSection.classList.add('active');
                document.querySelector('[data-mode="rules"]').classList.add('active');
            }
        }

        // Handle game mode selection change
        function handleGameModeSelection(selectedMode) {
            gameModeSelect.value = selectedMode;
            
            modeCards.forEach(card => {
                card.classList.remove('selected');
                if (card.dataset.mode === selectedMode) {
                    card.classList.add('selected');
                }
            });
            
            if (selectedMode === 'team') {
                teamSettings.style.display = 'block';
            } else {
                teamSettings.style.display = 'none';
            }
            
            if (selectedMode === 'quick') {
                roundsSelect.value = '10';
                customRoundsGroup.style.display = 'none';
            } else if (selectedMode === 'tournament') {
                roundsSelect.value = '30';
                customRoundsGroup.style.display = 'none';
            } else if (selectedMode === 'classic') {
                roundsSelect.value = 'auto';
                customRoundsGroup.style.display = 'none';
            }
        }

        // Handle rounds selection change
        function handleRoundsSelection() {
            const selectedValue = roundsSelect.value;
            if (selectedValue === 'custom') {
                customRoundsGroup.style.display = 'block';
            } else {
                customRoundsGroup.style.display = 'none';
            }
        }

        // Add player input field
        function addPlayerInput() {
            const playerGrid = document.querySelector('.player-grid');
            const playerCount = playerGrid.children.length;
            
            if (playerCount < 6) {
                const newInput = document.createElement('div');
                newInput.className = 'player-input';
                newInput.innerHTML = `
                    <label for="player${playerCount + 1}">Player ${playerCount + 1}</label>
                    <input type="text" id="player${playerCount + 1}" placeholder="Enter name">
                `;
                playerGrid.appendChild(newInput);
                
                // Focus the new input on mobile
                if (window.innerWidth <= 768) {
                    setTimeout(() => {
                        document.getElementById(`player${playerCount + 1}`).focus();
                    }, 100);
                }
            } else {
                showAdaptiveNotification('Maximum 6 players allowed!', 'warning', 4000);
            }
        }

        // Start new game
        function startGame() {
            const playerInputs = document.querySelectorAll('.player-input input');
            gameState.players = [];
            
            playerInputs.forEach(input => {
                if (input.value.trim() !== '') {
                    gameState.players.push(input.value.trim());
                }
            });
            
            if (gameState.players.length < 3) {
                showAdaptiveNotification('You need at least 3 players to play Wizard!', 'error', 5000);
                return;
            }
            
            showLoading(true);
            
            setTimeout(() => {
                const gameMode = gameModeSelect.value;
                const teamSize = teamSizeSelect.value;
                
                let totalRounds;
                const roundsSelection = roundsSelect.value;
                
                if (roundsSelection === 'auto') {
                    totalRounds = Math.floor(60 / gameState.players.length);
                } else if (roundsSelection === 'custom') {
                    totalRounds = parseInt(customRoundsInput.value);
                    if (isNaN(totalRounds) || totalRounds < 1 || totalRounds > 60) {
                        showAdaptiveNotification('Please enter a valid number of rounds (1-60)!', 'error', 5000);
                        showLoading(false);
                        return;
                    }
                } else {
                    totalRounds = parseInt(roundsSelection);
                }
                
                gameState.currentRound = 1;
                gameState.totalRounds = totalRounds;
                gameState.gameMode = gameMode;
                gameState.teamSize = parseInt(teamSize);
                gameState.bids = {};
                gameState.tricks = {};
                gameState.scores = {};
                gameState.gamePhase = 'bidding';
                gameState.gameStarted = true;
                
                gameState.players.forEach(player => {
                    gameState.scores[player] = 0;
                });
                
                updateScoreboard();
                createBidInputs();
                
                showSection('play');
                saveGame();
                
                showAdaptiveNotification(`Game started with ${gameState.players.length} players! Round ${gameState.currentRound} begins!`, 'success', 5000);
                showLoading(false);
            }, 500);
        }

        // Update scoreboard display
        function updateScoreboard() {
            // Update the table header with current round
            const currentRoundTable = document.getElementById('currentRoundTable');
            if (currentRoundTable) {
                currentRoundTable.textContent = gameState.currentRound;
            }
            
            // Update dealer info
            updateDealerInfo();
            
            scoreboardBody.innerHTML = '';
            
            gameState.players.forEach(player => {
                const row = document.createElement('tr');
                
                const nameCell = document.createElement('td');
                nameCell.textContent = player;
                
                const bidCell = document.createElement('td');
                bidCell.textContent = gameState.bids[player] !== undefined ? gameState.bids[player] : '-';
                
                const trickCell = document.createElement('td');
                trickCell.textContent = gameState.tricks[player] !== undefined ? gameState.tricks[player] : '-';
                
                const scoreCell = document.createElement('td');
                scoreCell.textContent = gameState.scores[player] || 0;
                
                row.appendChild(nameCell);
                row.appendChild(bidCell);
                row.appendChild(trickCell);
                row.appendChild(scoreCell);
                
                scoreboardBody.appendChild(row);
            });
        }
        
        // Update dealer information
        function updateDealerInfo() {
            const currentDealer = document.getElementById('currentDealer');
            if (currentDealer && gameState.players.length > 0) {
                // Dealer rotates clockwise each round
                // Round 1: Player 1 deals, Round 2: Player 2 deals, etc.
                const dealerIndex = (gameState.currentRound - 1) % gameState.players.length;
                const dealer = gameState.players[dealerIndex];
                currentDealer.textContent = dealer;
            }
        }

        // Create bid input fields
        function createBidInputs() {
            bidInputs.innerHTML = '';
            
            // Create table structure
            const table = document.createElement('table');
            table.style.cssText = `
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 2rem;
                background: var(--surface);
                border-radius: 1rem;
                overflow: hidden;
                box-shadow: var(--shadow);
            `;
            
            // Table header
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            headerRow.style.cssText = `
                background: var(--primary);
                color: white;
            `;
            
            const playerHeader = document.createElement('th');
            playerHeader.textContent = 'Player';
            playerHeader.style.cssText = `
                padding: 1rem;
                text-align: left;
                font-weight: 600;
                border-bottom: 1px solid var(--border);
            `;
            
            const bidHeader = document.createElement('th');
            bidHeader.textContent = 'Bid Selection';
            bidHeader.style.cssText = `
                padding: 1rem;
                text-align: center;
                font-weight: 600;
                border-bottom: 1px solid var(--border);
            `;
            
            headerRow.appendChild(playerHeader);
            headerRow.appendChild(bidHeader);
            thead.appendChild(headerRow);
            table.appendChild(thead);
            
            // Table body
            const tbody = document.createElement('tbody');
            
            gameState.players.forEach((player, index) => {
                const tableRow = document.createElement('tr');
                tableRow.style.cssText = `
                    border-bottom: 1px solid var(--border);
                    transition: background-color 0.2s ease;
                `;
                
                tableRow.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = 'rgba(99, 102, 241, 0.05)';
                });
                
                tableRow.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
                
                // Player name cell
                const playerCell = document.createElement('td');
                playerCell.style.cssText = `
                    padding: 1rem;
                    font-weight: 600;
                    color: var(--text);
                    border-right: 1px solid var(--border);
                `;
                
                const playerName = document.createElement('div');
                playerName.className = 'player-name';
                playerName.textContent = `👤 ${player}`;
                playerCell.appendChild(playerName);
                
                const bidLabel = document.createElement('div');
                bidLabel.textContent = '🎲 Select Your Bid:';
                bidLabel.style.cssText = `
                    font-weight: 600;
                    color: var(--text);
                    font-size: 1rem;
                    margin-top: 0.5rem;
                `;
                playerCell.appendChild(bidLabel);
                
                // Bid selection cell
                const bidCell = document.createElement('td');
                bidCell.style.cssText = `
                    padding: 1rem;
                    text-align: center;
                `;
                
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'button-container';
                
                for (let bidValue = 0; bidValue <= gameState.currentRound; bidValue++) {
                    const bidButton = document.createElement('button');
                    bidButton.type = 'button';
                    bidButton.className = 'interactive-btn';
                    bidButton.dataset.player = player;
                    bidButton.dataset.bid = bidValue;
                    bidButton.textContent = bidValue;
                    bidButton.title = `Bid ${bidValue} tricks`;
                    bidButton.setAttribute('role', 'button');
                    bidButton.setAttribute('aria-label', `Bid ${bidValue} tricks for ${player}`);
                    
                    const currentBid = gameState.bids[player] || 0;
                    const isSelected = currentBid === bidValue;
                    
                    if (isSelected) {
                        bidButton.classList.add('selected');
                    }
                    
                    // Enhanced mobile-compatible event handler
                    const handleBidSelection = function(e) {
                        e.preventDefault(); // Prevent default behavior
                        e.stopPropagation(); // Stop event bubbling
                        
                        const playerName = this.dataset.player;
                        const selectedBid = parseInt(this.dataset.bid);
                        
                        gameState.bids[playerName] = selectedBid;
                        
                        const allPlayerButtons = buttonContainer.querySelectorAll('.interactive-btn');
                        allPlayerButtons.forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        
                        this.classList.add('selected');
                        
                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                        
                        showAdaptiveNotification(`${playerName} bid ${selectedBid} tricks`, 'success', 2000);
                        
                        updateBidTotal();
                        saveGame();
                    };
                    
                    // Add both click and touch events for maximum mobile compatibility
                    bidButton.addEventListener('click', handleBidSelection);
                    bidButton.addEventListener('touchstart', handleBidSelection);
                    
                    // Debug: Log touch events for mobile troubleshooting
                    bidButton.addEventListener('touchstart', function(e) {
                        console.log('Touch event detected on bid button:', bidValue);
                    });
                    
                    // Add visual feedback for mobile touch
                    bidButton.addEventListener('touchstart', function() {
                        this.style.transform = 'scale(0.95)';
                    });
                    
                    bidButton.addEventListener('touchend', function() {
                        this.style.transform = '';
                    });
                    
                    buttonContainer.appendChild(bidButton);
                }
                
                bidCell.appendChild(buttonContainer);
                tableRow.appendChild(playerCell);
                tableRow.appendChild(bidCell);
                tbody.appendChild(tableRow);
            });
            
            table.appendChild(tbody);
            bidInputs.appendChild(table);
            
            const totalDisplay = document.createElement('div');
            totalDisplay.id = 'bidTotalDisplay';
            totalDisplay.className = 'total-display neutral';
            totalDisplay.innerHTML = `
                <div style="font-size: 1.2rem; font-weight: 700; margin-bottom: 0.5rem;">📊 Bid Verification</div>
                <div>Total Bids: <span id="bidTotalNumber">0</span></div>
                <div id="bidTotalStatus" style="font-size: 0.9rem; margin-top: 0.5rem;">Select bids for all players</div>
            `;
            bidInputs.appendChild(totalDisplay);
            
            updateBidTotal();
        }
        
        // Update bid total display
        function updateBidTotal() {
            let total = 0;
            let bidsCount = 0;
            
            gameState.players.forEach(player => {
                const bid = gameState.bids[player] || 0;
                total += bid;
                if (gameState.bids[player] !== undefined) {
                    bidsCount++;
                }
            });
            
            const totalDisplay = document.getElementById('bidTotalDisplay');
            const bidTotalNumber = document.getElementById('bidTotalNumber');
            const bidTotalStatus = document.getElementById('bidTotalStatus');
            
            if (totalDisplay && bidTotalNumber && bidTotalStatus) {
                bidTotalNumber.textContent = total;
                
                if (bidsCount < gameState.players.length) {
                    totalDisplay.className = 'total-display neutral';
                    bidTotalStatus.innerHTML = `⏳ ${bidsCount}/${gameState.players.length} players have bid`;
                } else if (total === gameState.currentRound) {
                    totalDisplay.className = 'total-display invalid';
                    bidTotalStatus.innerHTML = `🚫 INVALID - Cannot equal round ${gameState.currentRound}`;
                    
                    totalDisplay.style.animation = 'shake 0.5s ease-in-out';
                    setTimeout(() => {
                        totalDisplay.style.animation = '';
                    }, 500);
                } else {
                    totalDisplay.className = 'total-display valid';
                    bidTotalStatus.innerHTML = `✅ Valid - Ready to play!`;
                }
            }
        }

        // Submit bids
        function submitBids() {
            let totalBids = 0;
            let allBidsSubmitted = true;
            
            gameState.players.forEach(player => {
                const bid = gameState.bids[player] || 0;
                totalBids += bid;
                if (gameState.bids[player] === undefined) {
                    allBidsSubmitted = false;
                }
            });
            
            if (!allBidsSubmitted) {
                showAdaptiveNotification('Please ensure all players have made their bids before submitting!', 'warning', 4000);
                return;
            }
            
            if (totalBids === gameState.currentRound) {
                const allBidButtons = document.querySelectorAll('.interactive-btn');
                allBidButtons.forEach(button => {
                    button.style.borderColor = 'var(--danger)';
                    button.style.boxShadow = '0 4px 8px rgba(244, 67, 54, 0.4)';
                    button.style.animation = 'shake 0.5s ease-in-out';
                });
                
                const errorMsg = `🚫 Invalid Bids! Total (${totalBids}) cannot equal round ${gameState.currentRound}. Please adjust bids and try again.`;
                showAdaptiveNotification(errorMsg, 'error', 6000);
                
                setTimeout(() => {
                    allBidButtons.forEach(button => {
                        button.style.borderColor = '';
                        button.style.boxShadow = '';
                        button.style.animation = '';
                    });
                }, 3000);
                
                return;
            }
            
            gameState.gamePhase = 'playing';
            showPlayingPhase();
            saveGame();
            
            showAdaptiveNotification('🎯 Bids submitted! Time to play and record tricks!', 'success', 4000);
        }

        // Show playing phase UI
        function showPlayingPhase() {
            document.getElementById('biddingPhase').style.display = 'none';
            document.getElementById('playingPhase').style.display = 'block';
            submitBidsBtn.style.display = 'none';
            calculateRoundBtn.style.display = 'inline-block';
            
            trickInputs.innerHTML = '';
            
            // Create table structure
            const table = document.createElement('table');
            table.style.cssText = `
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 2rem;
                background: var(--surface);
                border-radius: 1rem;
                overflow: hidden;
                box-shadow: var(--shadow);
            `;
            
            // Table header
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            headerRow.style.cssText = `
                background: var(--primary);
                color: white;
            `;
            
            const playerHeader = document.createElement('th');
            playerHeader.textContent = 'Player';
            playerHeader.style.cssText = `
                padding: 1rem;
                text-align: left;
                font-weight: 600;
                border-bottom: 1px solid var(--border);
            `;
            
            const bidHeader = document.createElement('th');
            bidHeader.textContent = 'Bid';
            bidHeader.style.cssText = `
                padding: 1rem;
                text-align: center;
                font-weight: 600;
                border-bottom: 1px solid var(--border);
            `;
            
            const trickHeader = document.createElement('th');
            trickHeader.textContent = 'Tricks Won';
            trickHeader.style.cssText = `
                padding: 1rem;
                text-align: center;
                font-weight: 600;
                border-bottom: 1px solid var(--border);
            `;
            
            headerRow.appendChild(playerHeader);
            headerRow.appendChild(bidHeader);
            headerRow.appendChild(trickHeader);
            thead.appendChild(headerRow);
            table.appendChild(thead);
            
            // Table body
            const tbody = document.createElement('tbody');
            
            gameState.players.forEach((player, index) => {
                const tableRow = document.createElement('tr');
                tableRow.style.cssText = `
                    border-bottom: 1px solid var(--border);
                    transition: background-color 0.2s ease;
                `;
                
                tableRow.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = 'rgba(99, 102, 241, 0.05)';
                });
                
                tableRow.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
                
                // Player name cell
                const playerCell = document.createElement('td');
                playerCell.style.cssText = `
                    padding: 1rem;
                    font-weight: 600;
                    color: var(--text);
                    border-right: 1px solid var(--border);
                `;
                
                const playerName = document.createElement('div');
                playerName.className = 'player-name';
                playerName.textContent = `👤 ${player}`;
                playerCell.appendChild(playerName);
                
                // Bid info cell
                const bidCell = document.createElement('td');
                bidCell.style.cssText = `
                    padding: 1rem;
                    text-align: center;
                    border-right: 1px solid var(--border);
                `;
                
                const bidInfo = document.createElement('div');
                bidInfo.className = 'bid-info';
                bidInfo.textContent = `Bid: ${gameState.bids[player] || 0}`;
                bidCell.appendChild(bidInfo);
                
                // Trick selection cell
                const trickCell = document.createElement('td');
                trickCell.style.cssText = `
                    padding: 1rem;
                    text-align: center;
                `;
                
                const trickLabel = document.createElement('div');
                trickLabel.textContent = '🎯 Tricks Won:';
                trickLabel.style.cssText = `
                    font-weight: 600;
                    color: var(--text);
                    margin: 1rem 0;
                    font-size: 1.1rem;
                    text-align: center;
                `;
                trickCell.appendChild(trickLabel);
                
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'button-container';
                
                for (let i = 0; i <= gameState.currentRound; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'interactive-btn';
                    btn.textContent = i;
                    btn.dataset.player = player;
                    btn.dataset.tricks = i;
                    btn.title = `Record ${i} tricks won`;
                    
                    if (gameState.tricks[player] === i) {
                        btn.classList.add('active');
                    }
                    
                    btn.addEventListener('click', function() {
                        document.querySelectorAll(`.interactive-btn[data-player="${player}"]`).forEach(b => {
                            b.classList.remove('active');
                        });
                        
                        this.classList.add('active');
                        gameState.tricks[player] = i;
                        
                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                        
                        saveGame();
                        
                        const bid = gameState.bids[player] || 0;
                        const tricks = i;
                        if (bid === tricks) {
                            bidInfo.style.background = 'linear-gradient(135deg, var(--success), #059669)';
                            bidInfo.textContent = `Bid: ${bid} ✓ Perfect!`;
                            bidInfo.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.3)';
                        } else {
                            bidInfo.style.background = 'linear-gradient(135deg, var(--danger), #dc2626)';
                            bidInfo.textContent = `Bid: ${bid} ✗ Got ${tricks}`;
                            bidInfo.style.boxShadow = '0 4px 12px rgba(239, 68, 68, 0.3)';
                        }
                        
                        showAdaptiveNotification(`${player} won ${i} tricks`, 'info', 2000);
                        updateTrickTotal();
                    });
                    
                    buttonContainer.appendChild(btn);
                }
                
                trickCell.appendChild(buttonContainer);
                tableRow.appendChild(playerCell);
                tableRow.appendChild(bidCell);
                tableRow.appendChild(trickCell);
                tbody.appendChild(tableRow);
            });
            
            table.appendChild(tbody);
            trickInputs.appendChild(table);
            
            const trickTotalDisplay = document.createElement('div');
            trickTotalDisplay.id = 'trickTotalDisplay';
            trickTotalDisplay.className = 'total-display neutral';
            trickTotalDisplay.innerHTML = `
                <div style="font-size: 1.2rem; font-weight: 700; margin-bottom: 0.5rem;">📊 Trick Verification</div>
                <div>Total Tricks: <span id="trickTotalNumber">0</span> / ${gameState.currentRound}</div>
                <div id="trickTotalStatus" style="font-size: 0.9rem; margin-top: 0.5rem;">Record tricks for all players</div>
            `;
            trickInputs.appendChild(trickTotalDisplay);
            
            updateTrickTotal();
        }

        // Update trick total display
        function updateTrickTotal() {
            let total = 0;
            let tricksCount = 0;
            
            gameState.players.forEach(player => {
                const tricks = gameState.tricks[player] || 0;
                total += tricks;
                if (gameState.tricks[player] !== undefined) {
                    tricksCount++;
                }
            });
            
            const trickTotalDisplay = document.getElementById('trickTotalDisplay');
            const trickTotalNumber = document.getElementById('trickTotalNumber');
            const trickTotalStatus = document.getElementById('trickTotalStatus');
            
            if (trickTotalDisplay && trickTotalNumber && trickTotalStatus) {
                trickTotalNumber.textContent = total;
                
                if (tricksCount < gameState.players.length) {
                    trickTotalDisplay.className = 'total-display neutral';
                    trickTotalStatus.innerHTML = `⏳ ${tricksCount}/${gameState.players.length} players recorded`;
                } else if (total !== gameState.currentRound) {
                    trickTotalDisplay.className = 'total-display invalid';
                    trickTotalStatus.innerHTML = `🚫 INVALID - Must equal ${gameState.currentRound}`;
                    
                    trickTotalDisplay.style.animation = 'shake 0.5s ease-in-out';
                    setTimeout(() => {
                        trickTotalDisplay.style.animation = '';
                    }, 500);
                } else {
                    trickTotalDisplay.className = 'total-display valid';
                    trickTotalStatus.innerHTML = `✅ Valid - Ready to calculate scores!`;
                }
            }
        }

        // Calculate round scores
        function calculateRound() {
            let allValid = true;
            
            gameState.players.forEach(player => {
                if (gameState.tricks[player] === undefined) {
                    allValid = false;
                }
            });
            
            if (!allValid) {
                showAdaptiveNotification('📝 Please record tricks for all players before calculating scores!', 'error', 4000);
                return;
            }
            
            const totalTricks = gameState.players.reduce((sum, player) => sum + gameState.tricks[player], 0);
            if (totalTricks !== gameState.currentRound) {
                showAdaptiveNotification(`🚫 Invalid trick count! Total (${totalTricks}) must equal round ${gameState.currentRound}. Please check your recordings.`, 'error', 6000);
                
                const trickButtons = document.querySelectorAll('.interactive-btn');
                trickButtons.forEach(btn => {
                    btn.style.borderColor = 'var(--danger)';
                    btn.style.boxShadow = '0 4px 8px rgba(244, 67, 54, 0.4)';
                    btn.style.animation = 'shake 0.5s ease-in-out';
                });
                
                setTimeout(() => {
                    trickButtons.forEach(btn => {
                        btn.style.borderColor = '';
                        btn.style.boxShadow = '';
                        btn.style.animation = '';
                    });
                }, 3000);
                
                return;
            }
            
            gameState.players.forEach(player => {
                const bid = gameState.bids[player];
                const tricks = gameState.tricks[player];
                
                let points = 0;
                
                switch (gameState.gameMode) {
                    case 'classic':
                        if (bid === tricks) {
                            points = 20 + (10 * bid);
                        } else {
                            points = -10 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'quick':
                        if (bid === tricks) {
                            points = 15 + (8 * bid);
                        } else {
                            points = -8 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'expert':
                        if (bid === tricks) {
                            points = 25 + (12 * bid);
                        } else {
                            points = -15 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'team':
                        if (bid === tricks) {
                            points = 20 + (10 * bid);
                        } else {
                            points = -10 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'tournament':
                        if (bid === tricks) {
                            points = 30 + (15 * bid);
                        } else {
                            points = -20 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    default:
                        if (bid === tricks) {
                            points = 20 + (10 * bid);
                        } else {
                            points = -10 * Math.abs(bid - tricks);
                        }
                }
                
                gameState.scores[player] += points;
            });
            
            updateScoreboard();
            
            if (gameState.currentRound >= gameState.totalRounds) {
                declareWinner();
            } else {
                nextRoundBtn.style.display = 'inline-block';
                calculateRoundBtn.style.display = 'none';
            }
            
            saveGame();
            
            showAdaptiveNotification('Round completed! Scores updated successfully!', 'success', 4000);
        }

        // Advance to next round
        function nextRound() {
            gameState.currentRound++;
            gameState.gamePhase = 'bidding';
            gameState.bids = {};
            gameState.tricks = {};
            
            updateScoreboard();
            createBidInputs();
            
            document.getElementById('biddingPhase').style.display = 'block';
            document.getElementById('playingPhase').style.display = 'none';
            submitBidsBtn.style.display = 'inline-block';
            calculateRoundBtn.style.display = 'none';
            nextRoundBtn.style.display = 'none';
            
            saveGame();
            
            showAdaptiveNotification('Next round started! Good luck!', 'success', 3000);
        }

        // End game and reset scores/bids
        function endGame() {
            gameState.scores = {};
            gameState.bids = {};
            gameState.tricks = {};
            gameState.currentRound = 1;
            gameState.gamePhase = 'bidding';
            gameState.gameStarted = false;
            
            localStorage.removeItem('wizardGame');
            
            winnerBanner.style.display = 'none';
            gameEndActions.style.display = 'none';
            
            updateScoreboard();
            
            document.getElementById('biddingPhase').style.display = 'block';
            document.getElementById('playingPhase').style.display = 'none';
            submitBidsBtn.style.display = 'inline-block';
            calculateRoundBtn.style.display = 'none';
            nextRoundBtn.style.display = 'none';
            
            createBidInputs();
            showSection('setup');
            
            showAdaptiveNotification('Game ended and scores reset! Ready for a new game!', 'success', 4000);
        }

        // Clear game and start fresh
        function clearGame() {
            gameState.players = [];
            gameState.currentRound = 1;
            gameState.totalRounds = 10;
            gameState.bids = {};
            gameState.tricks = {};
            gameState.scores = {};
            gameState.gamePhase = 'bidding';
            gameState.gameStarted = false;
            
            localStorage.removeItem('wizardGame');
            
            winnerBanner.style.display = 'none';
            gameEndActions.style.display = 'none';
            

            
            const playerInputs = document.querySelectorAll('.player-input input');
            playerInputs.forEach(input => {
                input.value = '';
            });
            
            handleGameModeSelection('classic');
            showSection('setup');
            
            showAdaptiveNotification('Game cleared! Ready to start a fresh adventure!', 'success', 4000);
        }
        
        // Declare winner when game ends
        function declareWinner() {
            let highestScore = -Infinity;
            let winners = [];
            
            gameState.players.forEach(player => {
                if (gameState.scores[player] > highestScore) {
                    highestScore = gameState.scores[player];
                    winners = [player];
                } else if (gameState.scores[player] === highestScore) {
                    winners.push(player);
                }
            });
            
            if (winners.length === 1) {
                winnerBanner.textContent = `🏆 Winner: ${winners[0]} with ${highestScore} points! 🏆`;
            } else {
                winnerBanner.textContent = `🏆 Tie between ${winners.join(' and ')} with ${highestScore} points each! 🏆`;
            }
            
            winnerBanner.style.display = 'block';
            gameEndActions.style.display = 'block';
            nextRoundBtn.style.display = 'none';
            
            localStorage.removeItem('wizardGame');
        }

        // Help content for each game mode
        const helpContent = {
            classic: {
                title: "Classic Wizard",
                content: `
                    <h4>🎯 The Original Experience</h4>
                    <p>This is the traditional Wizard scoring system that balances risk and reward.</p>
                    
                    <h4>📊 Scoring System</h4>
                    <ul>
                        <li><strong>Correct Bid:</strong> 20 base points + 10 points per trick won</li>
                        <li><strong>Incorrect Bid:</strong> Lose 10 points for each trick over or under</li>
                    </ul>
                    
                    <div class="example-box">
                        <strong>Examples:</strong><br>
                        • Bid 3, win 3 tricks → <strong>50 points</strong> (20 + 30)<br>
                        • Bid 2, win 4 tricks → <strong>-20 points</strong> (10 × -2)<br>
                        • Bid 0, win 0 tricks → <strong>20 points</strong> (20 + 0)
                    </div>
                    
                    <h4>🎮 Perfect For</h4>
                    <p>New players and those who want the authentic Wizard experience with balanced scoring.</p>
                `
            },
            quick: {
                title: "Quick Play",
                content: `
                    <h4>⚡ Fast & Furious</h4>
                    <p>A faster-paced version with quicker scoring and shorter games.</p>
                    
                    <h4>📊 Scoring System</h4>
                    <ul>
                        <li><strong>Correct Bid:</strong> 15 base points + 8 points per trick won</li>
                        <li><strong>Incorrect Bid:</strong> Lose 8 points for each trick over or under</li>
                    </ul>
                    
                    <div class="example-box">
                        <strong>Examples:</strong><br>
                        • Bid 3, win 3 tricks → <strong>39 points</strong> (15 + 24)<br>
                        • Bid 2, win 4 tricks → <strong>-16 points</strong> (8 × -2)<br>
                        • Bid 0, win 0 tricks → <strong>15 points</strong> (15 + 0)
                    </div>
                    
                    <h4>🎮 Perfect For</h4>
                    <p>Quick gaming sessions and players who want faster-paced games with less dramatic score swings.</p>
                `
            },
            expert: {
                title: "Expert Mode",
                content: `
                    <h4>🧙‍♂️ High Stakes Wizardry</h4>
                    <p>For experienced players who want bigger rewards and bigger risks.</p>
                    
                    <h4>📊 Scoring System</h4>
                    <ul>
                        <li><strong>Correct Bid:</strong> 25 base points + 12 points per trick won</li>
                        <li><strong>Incorrect Bid:</strong> Lose 15 points for each trick over or under</li>
                    </ul>
                    
                    <div class="example-box">
                        <strong>Examples:</strong><br>
                        • Bid 3, win 3 tricks → <strong>61 points</strong> (25 + 36)<br>
                        • Bid 2, win 4 tricks → <strong>-30 points</strong> (15 × -2)<br>
                        • Bid 0, win 0 tricks → <strong>25 points</strong> (25 + 0)
                    </div>
                    
                    <h4>🎮 Perfect For</h4>
                    <p>Experienced players who want more dramatic score swings and higher stakes gameplay.</p>
                `
            },
            team: {
                title: "Team Play",
                content: `
                    <h4>🤝 Unite & Conquer</h4>
                    <p>Play in teams with shared scoring and collaborative strategy.</p>
                    
                    <h4>📊 Scoring System</h4>
                    <ul>
                        <li><strong>Correct Bid:</strong> 20 base points + 10 points per trick won</li>
                        <li><strong>Incorrect Bid:</strong> Lose 10 points for each trick over or under</li>
                        <li><strong>Team Scoring:</strong> Team members share the same score</li>
                    </ul>
                    
                    <div class="example-box">
                        <strong>Examples:</strong><br>
                        • Team A: Both bid 2, both win 2 → <strong>50 points each</strong><br>
                        • Team B: Both bid 1, one wins 2, one wins 0 → <strong>-10 points each</strong><br>
                        • Team coordination is key to success!
                    </div>
                    
                    <h4>🎮 Perfect For</h4>
                    <p>Groups who want to work together and enjoy collaborative gameplay with shared victories.</p>
                `
            },
            tournament: {
                title: "Tournament",
                content: `
                    <h4>🏆 Ultimate Challenge</h4>
                    <p>The highest stakes mode with maximum scoring potential and risk.</p>
                    
                    <h4>📊 Scoring System</h4>
                    <ul>
                        <li><strong>Correct Bid:</strong> 30 base points + 15 points per trick won</li>
                        <li><strong>Incorrect Bid:</strong> Lose 20 points for each trick over or under</li>
                    </ul>
                    
                    <div class="example-box">
                        <strong>Examples:</strong><br>
                        • Bid 3, win 3 tricks → <strong>75 points</strong> (30 + 45)<br>
                        • Bid 2, win 4 tricks → <strong>-40 points</strong> (20 × -2)<br>
                        • Bid 0, win 0 tricks → <strong>30 points</strong> (30 + 0)
                    </div>
                    
                    <h4>🎮 Perfect For</h4>
                    <p>Competitive players and tournaments where dramatic score swings create exciting gameplay.</p>
                `
            }
        };
        
        // Show help modal
        function showHelp(mode) {
            const content = helpContent[mode];
            if (content) {
                modalTitle.textContent = content.title;
                modalContent.innerHTML = content.content;
                helpModal.style.display = 'flex';
            }
        }
        
        // Close help modal
        function closeHelp() {
            helpModal.style.display = 'none';
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadGame();
            setupMobileInteractions();
            handleGameModeSelection('classic');
            
            // Event listeners
            navTabs.forEach(btn => {
                btn.addEventListener('click', function() {
                    const mode = this.dataset.mode;
                    showSection(mode);
                });
            });

            addPlayerBtn.addEventListener('click', addPlayerInput);
            startGameBtn.addEventListener('click', startGame);
            submitBidsBtn.addEventListener('click', submitBids);
            calculateRoundBtn.addEventListener('click', calculateRound);
            nextRoundBtn.addEventListener('click', nextRound);
            clearGameBtn.addEventListener('click', clearGame);
            endGameBtn.addEventListener('click', endGame);
            roundsSelect.addEventListener('change', handleRoundsSelection);
            
            modeCards.forEach(card => {
                card.addEventListener('click', function() {
                    const selectedMode = this.dataset.mode;
                    handleGameModeSelection(selectedMode);
                });
            });
            
            helpBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const mode = this.dataset.mode;
                    showHelp(mode);
                });
            });
            
            closeModal.addEventListener('click', closeHelp);
            helpModal.addEventListener('click', function(e) {
                if (e.target === helpModal) {
                    closeHelp();
                }
            });
            
            backToGameBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (gameState.gameStarted) {
                        showSection('play');
                    } else {
                        showSection('setup');
                    }
                });
            });
            
            // Add touch feedback for all buttons
            const buttons = document.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                });
                
                btn.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
        });
    </script>
</body>
</html>