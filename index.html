<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wizard Score Tracker</title>
    <style>
        :root {
            --primary: #6a1b9a;
            --secondary: #9c27b0;
            --accent: #ffab00;
            --dark: #4a148c;
            --light: #f3e5f5;
            --success: #4caf50;
            --danger: #f44336;
            --text: #333;
            --bg: #f9f9f9;
        }
        
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            color: var(--text);
            background-image: radial-gradient(circle at 10% 20%, rgba(234, 204, 248, 0.3) 0%, rgba(255, 255, 255, 1) 90%);
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: "üÉè";
            position: absolute;
            right: -40px;
            top: -10px;
            font-size: 2rem;
            transform: rotate(20deg);
        }
        
        .game-modes {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            background-color: var(--light);
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .mode-btn:hover {
            background-color: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        
        .mode-btn.active {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(106, 27, 154, 0.3);
        }
        
        .game-area {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .setup-section, .play-section, .rules-section {
            display: none;
        }
        
        .setup-section.active, .play-section.active, .rules-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .player-inputs {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .player-input {
            flex: 1;
            min-width: 200px;
        }
        
        .game-settings {
            background-color: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid var(--primary);
        }
        
        .setting-group {
            margin-bottom: 15px;
        }
        
        .setting-group:last-child {
            margin-bottom: 0;
        }
        
        .rounds-select, .custom-rounds-input, .team-size-select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background-color: white;
            transition: border 0.3s;
        }
        
        .rounds-select:focus, .custom-rounds-input:focus, .team-size-select:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .game-mode-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .mode-card {
            background: linear-gradient(135deg, var(--light) 0%, white 100%);
            border: 3px solid var(--light);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }
        
        .mode-card:hover::before {
            left: 100%;
        }
        
        .mode-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 10px 25px rgba(106, 27, 154, 0.2);
        }
        
        .mode-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(106, 27, 154, 0.3);
        }
        
        .mode-card.selected .mode-icon {
            transform: scale(1.1) rotate(5deg);
        }
        
        .mode-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            transition: transform 0.3s ease;
        }
        
        .mode-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary);
        }
        
        .mode-card.selected .mode-title {
            color: white;
        }
        
        .mode-desc {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .mode-card.selected .mode-desc {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .mode-stats {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .stat {
            background-color: rgba(106, 27, 154, 0.1);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--primary);
        }
        
                 .mode-card.selected .stat {
             background-color: rgba(255, 255, 255, 0.2);
             color: white;
         }
         
         .help-btn {
             position: absolute;
             top: 10px;
             right: 10px;
             width: 25px;
             height: 25px;
             border-radius: 50%;
             background-color: var(--accent);
             color: white;
             border: none;
             font-weight: bold;
             font-size: 14px;
             cursor: pointer;
             transition: all 0.3s ease;
             z-index: 10;
         }
         
         .help-btn:hover {
             background-color: #ffb300;
             transform: scale(1.1);
         }
         
         .mode-card.selected .help-btn {
             background-color: rgba(255, 255, 255, 0.3);
             color: white;
         }
         
         .mode-card.selected .help-btn:hover {
             background-color: rgba(255, 255, 255, 0.5);
         }
         
         .modal-overlay {
             position: fixed;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.9));
             backdrop-filter: blur(10px);
             display: none;
             justify-content: center;
             align-items: center;
             z-index: 1000;
             animation: fadeIn 0.3s ease-out;
         }
         
         @keyframes fadeIn {
             from { opacity: 0; }
             to { opacity: 1; }
         }
         
         .modal {
             background: linear-gradient(145deg, #ffffff, #f8f9fa);
             border-radius: 20px;
             padding: 0;
             max-width: 600px;
             width: 90%;
             max-height: 85vh;
             overflow: hidden;
             box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
             position: relative;
             animation: slideIn 0.4s ease-out;
             border: 1px solid rgba(255, 255, 255, 0.2);
         }
         
         @keyframes slideIn {
             from { 
                 transform: translateY(-50px) scale(0.95);
                 opacity: 0;
             }
             to { 
                 transform: translateY(0) scale(1);
                 opacity: 1;
             }
         }
         
         .modal-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             padding: 25px 30px 20px;
             background: linear-gradient(135deg, var(--primary), #4a90e2);
             color: white;
             position: relative;
         }
         
         .modal-header::after {
             content: '';
             position: absolute;
             bottom: 0;
             left: 0;
             right: 0;
             height: 3px;
             background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
         }
         
         .modal-title {
             color: white;
             font-size: 1.6rem;
             font-weight: bold;
             margin: 0;
             text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
         }
         
         .close-btn {
             background: rgba(255, 255, 255, 0.2);
             border: 2px solid rgba(255, 255, 255, 0.3);
             font-size: 20px;
             cursor: pointer;
             color: white;
             padding: 0;
             width: 35px;
             height: 35px;
             display: flex;
             align-items: center;
             justify-content: center;
             border-radius: 50%;
             transition: all 0.3s ease;
             backdrop-filter: blur(10px);
         }
         
         .close-btn:hover {
             background: rgba(255, 255, 255, 0.3);
             border-color: rgba(255, 255, 255, 0.5);
             transform: scale(1.1);
             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
         }
         
         .modal-content {
             line-height: 1.7;
             padding: 30px;
             max-height: 60vh;
             overflow-y: auto;
             background: white;
         }
         
         .modal-content h4 {
             color: var(--primary);
             margin-top: 25px;
             margin-bottom: 15px;
             font-size: 1.2rem;
             border-bottom: 2px solid var(--light);
             padding-bottom: 8px;
         }
         
         .modal-content ul {
             padding-left: 25px;
             margin-bottom: 20px;
         }
         
         .modal-content li {
             margin-bottom: 12px;
             position: relative;
         }
         
         .modal-content li::before {
             content: '‚ú®';
             position: absolute;
             left: -25px;
             color: var(--primary);
         }
         
         .example-box {
             background: linear-gradient(135deg, #f8f9fa, #e9ecef);
             padding: 20px;
             border-radius: 15px;
             margin: 20px 0;
             border-left: 5px solid var(--primary);
             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
             position: relative;
             overflow: hidden;
         }
         
         .example-box::before {
             content: '';
             position: absolute;
             top: 0;
             left: 0;
             right: 0;
             height: 3px;
             background: linear-gradient(90deg, var(--primary), #4ecdc4);
         }
         
         .example-box strong {
             color: var(--primary);
             font-weight: 600;
         }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            background-color: var(--dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        
        .btn-secondary {
            background-color: var(--light);
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background-color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
            border: 2px solid var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #d32f2f;
            border-color: #d32f2f;
        }
        
        .btn-accent {
            background-color: var(--accent);
            color: var(--text);
        }
        
        .btn-accent:hover {
            background-color: #ffb300;
        }
        
        .round-info {
            background: linear-gradient(145deg, var(--light), #e8d5f2);
            padding: 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            color: var(--primary);
            border: 3px solid var(--primary);
            box-shadow: 0 6px 12px rgba(106, 27, 154, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .round-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .round-info:hover::before {
            left: 100%;
        }
        
        .round-info:hover {
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            color: white;
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 20px rgba(106, 27, 154, 0.4);
        }
        
        .scoreboard {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .scoreboard th {
            background-color: var(--primary);
            color: white;
            padding: 12px;
            text-align: center;
        }
        
        .scoreboard td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        .scoreboard tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .scoreboard tr:hover {
            background-color: #f0f0f0;
        }
        
        .bid-input {
            width: 60px;
            text-align: center;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        
        .bid-input:focus {
            border-color: var(--primary);
        }
        
        .trick-btn {
            background: linear-gradient(145deg, var(--light), #e8d5f2);
            border: 2px solid var(--primary);
            color: var(--primary);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 0 8px;
            box-shadow: 0 4px 8px rgba(106, 27, 154, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .trick-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }
        
        .trick-btn:hover::before {
            left: 100%;
        }
        
        .trick-btn:hover {
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 16px rgba(106, 27, 154, 0.4);
        }
        
        .trick-btn.active {
            background: linear-gradient(145deg, var(--success), #45a049);
            color: white;
            border-color: var(--success);
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
            animation: trickSelected 0.3s ease-out;
        }
        
        @keyframes trickSelected {
            0% { transform: scale(1.1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(5deg); }
            100% { transform: scale(1.1) rotate(0deg); }
        }
        
        @keyframes bidSelected {
            0% { 
                transform: scale(1.1);
                box-shadow: 0 6px 16px rgba(76, 175, 80, 0.5), 0 0 0 2px rgba(76, 175, 80, 0.3);
            }
            50% { 
                transform: scale(1.15);
                box-shadow: 0 8px 20px rgba(76, 175, 80, 0.7), 0 0 0 4px rgba(76, 175, 80, 0.5);
            }
            100% { 
                transform: scale(1.1);
                box-shadow: 0 6px 16px rgba(76, 175, 80, 0.5), 0 0 0 2px rgba(76, 175, 80, 0.3);
            }
        }
        
        .playing-phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, var(--light), #e8d5f2);
            border-radius: 12px;
            border: 2px solid var(--primary);
        }
        
        .playing-phase-header h3 {
            margin: 0;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .phase-indicator {
            display: flex;
            gap: 8px;
        }
        
        .phase-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ccc;
            transition: all 0.3s ease;
        }
        
        .phase-dot.active {
            background-color: var(--success);
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.6);
        }
        
        .trick-instructions {
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-radius: 12px;
            border-left: 4px solid var(--accent);
        }
        
        .trick-instructions p {
            margin: 0 0 15px 0;
            font-size: 1.1rem;
            color: var(--text);
        }
        
        .trick-tips {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .tip {
            font-size: 0.95rem;
            color: #666;
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .trick-container {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid var(--light);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        /* Beautiful Notification System */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }
        
        .notification {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .notification::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .notification.success {
            border-color: var(--success);
        }
        
        .notification.success::before {
            background: linear-gradient(90deg, var(--success), #45a049);
        }
        
        .notification.error {
            border-color: var(--danger);
        }
        
        .notification.error::before {
            background: linear-gradient(90deg, var(--danger), #d32f2f);
        }
        
        .notification.warning {
            border-color: var(--accent);
        }
        
        .notification.warning::before {
            background: linear-gradient(90deg, var(--accent), #ffb74d);
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .notification-title {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .notification-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .notification-close:hover {
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--danger);
        }
        
        .notification-message {
            color: var(--text);
            line-height: 1.5;
            margin: 0;
        }
        
        .notification.success .notification-title {
            color: var(--success);
        }
        
        .notification.error .notification-title {
            color: var(--danger);
        }
        
        .notification.warning .notification-title {
            color: var(--accent);
        }
        
        .bidding-phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, var(--light), #e8d5f2);
            border-radius: 12px;
            border: 2px solid var(--primary);
        }
        
        .bidding-phase-header h3 {
            margin: 0;
            color: var(--primary);
            font-size: 1.4rem;
        }
        
        .bid-instructions {
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }
        
        .bid-instructions p {
            margin: 0 0 15px 0;
            font-size: 1.1rem;
            color: var(--text);
        }
        
        .bid-tips {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .bid-container {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid var(--light);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .rules-content {
            line-height: 1.6;
        }
        
        .rules-content h3 {
            color: var(--primary);
            margin-top: 25px;
            border-bottom: 2px solid var(--light);
            padding-bottom: 8px;
        }
        
        .rules-content ul {
            padding-left: 20px;
        }
        
        .rules-content li {
            margin-bottom: 10px;
        }
        
                 .winner-banner {
             background: linear-gradient(135deg, var(--primary), var(--secondary));
             color: white;
             padding: 15px;
             border-radius: 10px;
             text-align: center;
             font-size: 1.2rem;
             font-weight: bold;
             margin-top: 20px;
             display: none;
             animation: pulse 2s infinite;
         }
         
         .game-end-actions {
             text-align: center;
             margin-top: 20px;
             padding: 20px;
             background-color: var(--light);
             border-radius: 10px;
             border: 2px solid var(--primary);
         }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .card-icon {
            font-size: 1.2rem;
            margin: 0 3px;
        }
        
        .wizard-icon {
            color: var(--primary);
        }
        
        .jester-icon {
            color: var(--accent);
        }
        
        @media (max-width: 768px) {
            .player-inputs {
                flex-direction: column;
            }
            
            .trick-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
                margin: 0 4px;
            }
            
            .playing-phase-header,
            .bidding-phase-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .player-trick-card,
            .player-card {
                padding: 15px;
            }
            
            .trick-tips,
            .bid-tips {
                flex-direction: column;
            }
            
            .tip {
                font-size: 0.9rem;
                padding: 6px 10px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
                margin: 0;
            }
            
            .notification-container {
                right: 10px;
                left: 10px;
                max-width: none;
            }
            
            .notification {
                padding: 15px;
                font-size: 0.9rem;
            }
            
            .notification-title {
                font-size: 1rem;
            }
            
            .game-mode-cards {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .mode-card {
                padding: 15px;
            }
            
            .mode-icon {
                font-size: 2rem;
            }
            
            .mode-title {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Wizard Score Tracker</h1>
            <p>Keep score and master the magical card game!</p>
        </header>
        
        <div class="game-modes">
            <button class="mode-btn active" data-mode="setup">New Game</button>
            <button class="mode-btn" data-mode="play">Current Game</button>
            <button class="mode-btn" data-mode="rules">Game Rules</button>
        </div>
        
        <div class="game-area">
            <div class="setup-section active">
                <h2>Start a New Game</h2>
                <p>Enter player names to begin your Wizard adventure!</p>
                
                <div class="player-inputs">
                    <div class="player-input">
                        <label for="player1">Player 1</label>
                        <input type="text" id="player1" placeholder="Enter name">
                    </div>
                    <div class="player-input">
                        <label for="player2">Player 2</label>
                        <input type="text" id="player2" placeholder="Enter name">
                    </div>
                    <div class="player-input">
                        <label for="player3">Player 3</label>
                        <input type="text" id="player3" placeholder="Enter name">
                    </div>
                    <div class="player-input">
                        <label for="player4">Player 4</label>
                        <input type="text" id="player4" placeholder="Enter name">
                    </div>
                </div>
                
                <div class="game-settings">
                    <div class="setting-group">
                        <label>Choose Your Adventure:</label>
                        <div class="game-mode-cards">
                                                         <div class="mode-card" data-mode="classic">
                                 <div class="mode-icon">üÉè</div>
                                 <div class="mode-title">Classic Wizard</div>
                                 <div class="mode-desc">The original experience</div>
                                 <div class="mode-stats">
                                     <span class="stat">20 + 10√óbid</span>
                                     <span class="stat">-10√ódiff</span>
                                 </div>
                                 <button class="help-btn" data-mode="classic">?</button>
                             </div>
                                                         <div class="mode-card" data-mode="quick">
                                 <div class="mode-icon">‚ö°</div>
                                 <div class="mode-title">Quick Play</div>
                                 <div class="mode-desc">Fast & furious</div>
                                 <div class="mode-stats">
                                     <span class="stat">15 + 8√óbid</span>
                                     <span class="stat">-8√ódiff</span>
                                 </div>
                                 <button class="help-btn" data-mode="quick">?</button>
                             </div>
                                                         <div class="mode-card" data-mode="expert">
                                 <div class="mode-icon">üßô‚Äç‚ôÇÔ∏è</div>
                                 <div class="mode-title">Expert Mode</div>
                                 <div class="mode-desc">High stakes wizardry</div>
                                 <div class="mode-stats">
                                     <span class="stat">25 + 12√óbid</span>
                                     <span class="stat">-15√ódiff</span>
                                 </div>
                                 <button class="help-btn" data-mode="expert">?</button>
                             </div>
                                                         <div class="mode-card" data-mode="team">
                                 <div class="mode-icon">ü§ù</div>
                                 <div class="mode-title">Team Play</div>
                                 <div class="mode-desc">Unite & conquer</div>
                                 <div class="mode-stats">
                                     <span class="stat">20 + 10√óbid</span>
                                     <span class="stat">-10√ódiff</span>
                                 </div>
                                 <button class="help-btn" data-mode="team">?</button>
                             </div>
                                                         <div class="mode-card" data-mode="tournament">
                                 <div class="mode-icon">üèÜ</div>
                                 <div class="mode-title">Tournament</div>
                                 <div class="mode-desc">Ultimate challenge</div>
                                 <div class="mode-stats">
                                     <span class="stat">30 + 15√óbid</span>
                                     <span class="stat">-20√ódiff</span>
                                 </div>
                                 <button class="help-btn" data-mode="tournament">?</button>
                             </div>
                        </div>
                        <input type="hidden" id="gameModeSelect" value="classic">
                    </div>
                    <div class="setting-group">
                        <label for="roundsSelect">Number of Rounds:</label>
                        <select id="roundsSelect" class="rounds-select">
                            <option value="auto">Auto (60 √∑ players)</option>
                            <option value="10">10 Rounds</option>
                            <option value="15">15 Rounds</option>
                            <option value="20">20 Rounds</option>
                            <option value="30">30 Rounds</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    <div class="setting-group" id="customRoundsGroup" style="display: none;">
                        <label for="customRounds">Custom Rounds:</label>
                        <input type="number" id="customRounds" min="1" max="60" value="10" class="custom-rounds-input">
                    </div>
                    <div class="setting-group" id="teamSettings" style="display: none;">
                        <label for="teamSize">Team Size:</label>
                        <select id="teamSize" class="team-size-select">
                            <option value="2">2 players per team</option>
                            <option value="3">3 players per team</option>
                        </select>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="addPlayerBtn" class="btn btn-secondary">Add Player</button>
                    <button id="startGameBtn" class="btn">Start Game</button>
                </div>
            </div>
            
            <div class="play-section">
                <div class="round-info">
                    Round <span id="currentRound">1</span> of <span id="totalRounds">10</span>
                </div>
                
                <table class="scoreboard">
                    <thead>
                        <tr>
                            <th>Player</th>
                            <th>Bid</th>
                            <th>Tricks</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody id="scoreboardBody">
                        <!-- Scores will be populated here -->
                    </tbody>
                </table>
                
                <div id="biddingPhase">
                    <div class="bidding-phase-header">
                        <h3>üé≤ Bidding Phase</h3>
                        <div class="phase-indicator">
                            <span class="phase-dot active"></span>
                            <span class="phase-dot"></span>
                        </div>
                    </div>
                    <div class="bid-instructions">
                        <p>üéØ <strong>Predict how many tricks each player will win this round:</strong></p>
                        <div class="bid-tips">
                            <span class="tip">üí≠ Each player bids based on their cards</span>
                            <span class="tip">‚ö†Ô∏è Total bids cannot equal the round number</span>
                        </div>
                    </div>
                    <div class="bid-container">
                        <div id="bidInputs"></div>
                    </div>
                </div>
                
                <div id="playingPhase" style="display: none;">
                    <div class="playing-phase-header">
                        <h3>üéØ Playing Phase</h3>
                        <div class="phase-indicator">
                            <span class="phase-dot active"></span>
                            <span class="phase-dot"></span>
                        </div>
                    </div>
                    <div class="trick-instructions">
                        <p>üéÆ <strong>Record the tricks each player won this round:</strong></p>
                        <div class="trick-tips">
                            <span class="tip">üí° Click the number of tricks each player actually won</span>
                            <span class="tip">üéØ Compare with their bids to calculate scores</span>
                        </div>
                    </div>
                    <div class="trick-container">
                        <div id="trickInputs"></div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="submitBidsBtn" class="btn">Submit Bids</button>
                    <button id="calculateRoundBtn" class="btn" style="display: none;">Calculate Round</button>
                    <button id="nextRoundBtn" class="btn btn-accent" style="display: none;">Next Round</button>
                    <button id="endGameBtn" class="btn btn-danger" style="display: inline-block;">End Game & Reset Scores</button>
                </div>
                
                                 <div id="winnerBanner" class="winner-banner"></div>
                                 <div id="gameEndActions" class="game-end-actions" style="display: none;">
                    <button id="clearGameBtn" class="btn btn-secondary">Clear Game & Start New</button>
                </div>
            </div>
            
            <div class="rules-section">
                <h2>Wizard Card Game Rules</h2>
                
                <div class="rules-content">
                    <h3>Objective</h3>
                    <p>Wizard is a trick-taking game where players predict how many tricks they'll win each round. Score points by making accurate bids!</p>
                    
                    <h3>Setup</h3>
                    <ul>
                        <li>Use a standard 52-card deck plus 4 Wizard <span class="card-icon wizard-icon">‚òÖ</span> and 4 Jester <span class="card-icon jester-icon">üÉè</span> cards</li>
                        <li>3-6 players (best with 4-6)</li>
                        <li>Game lasts for 60 cards √∑ number of players (e.g., 15 rounds for 4 players)</li>
                    </ul>
                    
                    <h3>Gameplay</h3>
                    <ul>
                        <li>Each round has two phases: <strong>Bidding</strong> and <strong>Playing</strong></li>
                        <li>Deal 1 card in Round 1, 2 in Round 2, up to the maximum</li>
                        <li>After dealing, players bid how many tricks they'll win (can bid 0)</li>
                        <li><strong>Important:</strong> The sum of all bids cannot equal the round number</li>
                        <li>Play proceeds clockwise, following suit if possible</li>
                    </ul>
                    
                    <h3>Card Hierarchy</h3>
                    <ul>
                        <li><strong>Wizard <span class="card-icon wizard-icon">‚òÖ</span>:</strong> Highest card, wins any trick automatically</li>
                        <li><strong>Jester <span class="card-icon jester-icon">üÉè</span>:</strong> Lowest card, cannot win any trick</li>
                        <li>Standard cards rank A (high), K, Q, J, 10-2 (low)</li>
                        <li>Trump suit (determined by first card of the round) beats all non-Wizard cards</li>
                    </ul>
                    
                    <h3>Game Modes</h3>
                    <ul>
                        <li><strong>Classic Wizard:</strong> Standard scoring (20 + 10√óbid if correct, -10√ódifference if wrong)</li>
                        <li><strong>Quick Play:</strong> Faster scoring (15 + 8√óbid if correct, -8√ódifference if wrong) - 10 rounds</li>
                        <li><strong>Expert Mode:</strong> Higher stakes (25 + 12√óbid if correct, -15√ódifference if wrong)</li>
                        <li><strong>Team Play:</strong> Play in teams with shared scoring</li>
                        <li><strong>Tournament:</strong> Maximum scoring (30 + 15√óbid if correct, -20√ódifference if wrong) - 30 rounds</li>
                    </ul>
                    
                    <h3>Scoring</h3>
                    <ul>
                        <li><strong>Correct bid:</strong> Base points + bonus points per trick won</li>
                        <li><strong>Incorrect bid:</strong> Lose points for each trick over or under</li>
                        <li>Example (Classic): Bid 3 and win 3 ‚Üí 50 points (20 + 30)</li>
                        <li>Example (Classic): Bid 2 and win 4 ‚Üí -20 points (10 √ó -2)</li>
                    </ul>
                    
                    <h3>Winning</h3>
                    <p>The player with the highest score after all rounds wins the game!</p>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary back-to-game-btn">Back to Game</button>
                </div>
            </div>
                 </div>
     </div>
     
     <!-- Help Modal -->
     <div id="helpModal" class="modal-overlay">
         <div class="modal">
             <div class="modal-header">
                 <h3 class="modal-title" id="modalTitle">Game Mode Help</h3>
                 <button class="close-btn" id="closeModal">&times;</button>
             </div>
             <div class="modal-content" id="modalContent">
                 <!-- Content will be populated by JavaScript -->
             </div>
         </div>
         </div>
    
    <!-- Beautiful Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>
    
    <script>
        // Beautiful Notification System
        function showNotification(message, type = 'info', duration = 5000) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">
                        ${icons[type]} ${type.charAt(0).toUpperCase() + type.slice(1)}
                    </div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
                <p class="notification-message">${message}</p>
            `;
            
            container.appendChild(notification);
            
            // Trigger animation
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // Auto remove after duration
            if (duration > 0) {
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 400);
                }, duration);
            }
        }
        
        // Game state
        const gameState = {
            players: [],
            currentRound: 1,
            totalRounds: 10,
            bids: {},
            tricks: {},
            scores: {},
            gamePhase: 'bidding', // 'bidding' or 'playing'
            gameStarted: false
        };

        // DOM elements
        const modeBtns = document.querySelectorAll('.mode-btn');
        const setupSection = document.querySelector('.setup-section');
        const playSection = document.querySelector('.play-section');
        const rulesSection = document.querySelector('.rules-section');
        const addPlayerBtn = document.getElementById('addPlayerBtn');
        const startGameBtn = document.getElementById('startGameBtn');
        const scoreboardBody = document.getElementById('scoreboardBody');
        const bidInputs = document.getElementById('bidInputs');
        const trickInputs = document.getElementById('trickInputs');
        const submitBidsBtn = document.getElementById('submitBidsBtn');
        const calculateRoundBtn = document.getElementById('calculateRoundBtn');
        const nextRoundBtn = document.getElementById('nextRoundBtn');
        const currentRoundEl = document.getElementById('currentRound');
        const totalRoundsEl = document.getElementById('totalRounds');
                 const winnerBanner = document.getElementById('winnerBanner');
                 const gameEndActions = document.getElementById('gameEndActions');
        const endGameBtn = document.getElementById('endGameBtn');
        const clearGameBtn = document.getElementById('clearGameBtn');
         const backToGameBtns = document.querySelectorAll('.back-to-game-btn');
        const gameModeSelect = document.getElementById('gameModeSelect');
        const modeCards = document.querySelectorAll('.mode-card');
        const roundsSelect = document.getElementById('roundsSelect');
        const customRoundsGroup = document.getElementById('customRoundsGroup');
        const customRoundsInput = document.getElementById('customRounds');
                 const teamSettings = document.getElementById('teamSettings');
         const teamSizeSelect = document.getElementById('teamSize');
         const helpModal = document.getElementById('helpModal');
         const modalTitle = document.getElementById('modalTitle');
         const modalContent = document.getElementById('modalContent');
         const closeModal = document.getElementById('closeModal');
         const helpBtns = document.querySelectorAll('.help-btn');

        // Initialize from localStorage
        function loadGame() {
            const savedGame = localStorage.getItem('wizardGame');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                Object.assign(gameState, parsed);
                gameState.gameStarted = true;
                
                // Update UI
                currentRoundEl.textContent = gameState.currentRound;
                totalRoundsEl.textContent = gameState.totalRounds;
                updateScoreboard();
                
                if (gameState.gamePhase === 'playing') {
                    showPlayingPhase();
                }
                
                // Show play section if game is in progress
                showSection('play');
                
                // Check if game is complete
                if (gameState.currentRound > gameState.totalRounds) {
                    declareWinner();
                }
            }
        }

        // Save game to localStorage
        function saveGame() {
            localStorage.setItem('wizardGame', JSON.stringify(gameState));
        }

        // Switch between sections
        function showSection(section) {
            setupSection.classList.remove('active');
            playSection.classList.remove('active');
            rulesSection.classList.remove('active');
            
            modeBtns.forEach(btn => btn.classList.remove('active'));
            
            if (section === 'setup') {
                setupSection.classList.add('active');
                document.querySelector('[data-mode="setup"]').classList.add('active');
            } else if (section === 'play') {
                playSection.classList.add('active');
                document.querySelector('[data-mode="play"]').classList.add('active');
            } else if (section === 'rules') {
                rulesSection.classList.add('active');
                document.querySelector('[data-mode="rules"]').classList.add('active');
            }
        }

        // Handle game mode selection change
        function handleGameModeSelection(selectedMode) {
            // Update hidden input
            gameModeSelect.value = selectedMode;
            
            // Update visual selection
            modeCards.forEach(card => {
                card.classList.remove('selected');
                if (card.dataset.mode === selectedMode) {
                    card.classList.add('selected');
                }
            });
            
            // Show/hide team settings
            if (selectedMode === 'team') {
                teamSettings.style.display = 'block';
            } else {
                teamSettings.style.display = 'none';
            }
            
            // Update rounds based on game mode
            if (selectedMode === 'quick') {
                roundsSelect.value = '10';
                customRoundsGroup.style.display = 'none';
            } else if (selectedMode === 'tournament') {
                roundsSelect.value = '30';
                customRoundsGroup.style.display = 'none';
            } else if (selectedMode === 'classic') {
                roundsSelect.value = 'auto';
                customRoundsGroup.style.display = 'none';
            }
        }

        // Handle rounds selection change
        function handleRoundsSelection() {
            const selectedValue = roundsSelect.value;
            if (selectedValue === 'custom') {
                customRoundsGroup.style.display = 'block';
            } else {
                customRoundsGroup.style.display = 'none';
            }
        }

        // Add player input field
        function addPlayerInput() {
            const playerInputs = document.querySelector('.player-inputs');
            const playerCount = playerInputs.children.length;
            
            if (playerCount < 6) {
                const newInput = document.createElement('div');
                newInput.className = 'player-input';
                newInput.innerHTML = `
                    <label for="player${playerCount + 1}">Player ${playerCount + 1}</label>
                    <input type="text" id="player${playerCount + 1}" placeholder="Enter name">
                `;
                playerInputs.appendChild(newInput);
            } else {
                showNotification('Maximum 6 players allowed!', 'warning', 4000);
            }
        }

        // Start new game
        function startGame() {
            const playerInputs = document.querySelectorAll('.player-input input');
            gameState.players = [];
            
            playerInputs.forEach(input => {
                if (input.value.trim() !== '') {
                    gameState.players.push(input.value.trim());
                }
            });
            
            if (gameState.players.length < 3) {
                showNotification('You need at least 3 players to play Wizard!', 'error', 5000);
                return;
            }
            
            // Get game mode and settings
            const gameMode = gameModeSelect.value;
            const teamSize = teamSizeSelect.value;
            
            // Determine number of rounds
            let totalRounds;
            const roundsSelection = roundsSelect.value;
            
            if (roundsSelection === 'auto') {
                totalRounds = Math.floor(60 / gameState.players.length);
            } else if (roundsSelection === 'custom') {
                totalRounds = parseInt(customRoundsInput.value);
                if (isNaN(totalRounds) || totalRounds < 1 || totalRounds > 60) {
                    showNotification('Please enter a valid number of rounds (1-60)!', 'error', 5000);
                    return;
                }
            } else {
                totalRounds = parseInt(roundsSelection);
            }
            
            // Initialize game state
            gameState.currentRound = 1;
            gameState.totalRounds = totalRounds;
            gameState.gameMode = gameMode;
            gameState.teamSize = parseInt(teamSize);
            gameState.bids = {};
            gameState.tricks = {};
            gameState.scores = {};
            gameState.gamePhase = 'bidding';
            gameState.gameStarted = true;
            
            // Initialize scores
            gameState.players.forEach(player => {
                gameState.scores[player] = 0;
            });
            
            // Update UI
            currentRoundEl.textContent = gameState.currentRound;
            totalRoundsEl.textContent = gameState.totalRounds;
            updateScoreboard();
            createBidInputs();
            
            // Show play section
            showSection('play');
            
            // Save game
            saveGame();
            
            // Show success notification
            showNotification(`üéÆ Game started with ${gameState.players.length} players! Round ${gameState.currentRound} begins!`, 'success', 5000);
        }

        // Update scoreboard display
        function updateScoreboard() {
            scoreboardBody.innerHTML = '';
            
            gameState.players.forEach(player => {
                const row = document.createElement('tr');
                
                const nameCell = document.createElement('td');
                nameCell.textContent = player;
                
                const bidCell = document.createElement('td');
                bidCell.textContent = gameState.bids[player] !== undefined ? gameState.bids[player] : '-';
                
                const trickCell = document.createElement('td');
                trickCell.textContent = gameState.tricks[player] !== undefined ? gameState.tricks[player] : '-';
                
                const scoreCell = document.createElement('td');
                scoreCell.textContent = gameState.scores[player] || 0;
                
                row.appendChild(nameCell);
                row.appendChild(bidCell);
                row.appendChild(trickCell);
                row.appendChild(scoreCell);
                
                scoreboardBody.appendChild(row);
            });
        }

        // Create bid input fields
        function createBidInputs() {
            bidInputs.innerHTML = '';
            
            // Add round info header
            const roundInfo = document.createElement('div');
            roundInfo.style.cssText = `
                margin-bottom: 20px;
                padding: 15px;
                background: linear-gradient(135deg, var(--light), #e8d5f2);
                border-radius: 12px;
                text-align: center;
                font-weight: bold;
                color: var(--primary);
                border: 2px solid var(--primary);
                box-shadow: 0 4px 8px rgba(106, 27, 154, 0.2);
            `;
            roundInfo.innerHTML = `üéØ <strong>Round ${gameState.currentRound}</strong>: Each player can bid 0 to ${gameState.currentRound} tricks<br>` +
                                `‚ö†Ô∏è <em>Important: The sum of all bids cannot equal ${gameState.currentRound}</em>`;
            bidInputs.appendChild(roundInfo);
            
            gameState.players.forEach((player, index) => {
                const playerCard = document.createElement('div');
                playerCard.style.cssText = `
                    background: linear-gradient(135deg, ${index % 2 === 0 ? '#f8f9fa' : '#e8f5e8'}, ${index % 2 === 0 ? '#e9ecef' : '#d4edda'});
                    border: 2px solid ${index % 2 === 0 ? 'var(--primary)' : 'var(--success)'};
                    border-radius: 12px;
                    padding: 15px;
                    margin-bottom: 15px;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    transition: all 0.3s ease;
                `;
                
                const playerHeader = document.createElement('div');
                playerHeader.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 12px;
                `;
                
                const playerName = document.createElement('h4');
                playerName.textContent = `üë§ ${player}`;
                playerName.style.cssText = `
                    margin: 0;
                    color: var(--primary);
                    font-size: 1.1rem;
                    font-weight: bold;
                `;
                
                const bidLabel = document.createElement('div');
                bidLabel.textContent = 'üé≤ Bid:';
                bidLabel.style.cssText = `
                    font-weight: bold;
                    color: var(--text);
                    font-size: 0.95rem;
                `;
                
                playerHeader.appendChild(playerName);
                playerHeader.appendChild(bidLabel);
                playerCard.appendChild(playerHeader);
                
                const bidButtonContainer = document.createElement('div');
                bidButtonContainer.style.cssText = `
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    gap: 8px;
                    flex-wrap: wrap;
                    margin-top: 10px;
                `;
                
                // Create circular bid buttons for 0 to current round
                for (let bidValue = 0; bidValue <= gameState.currentRound; bidValue++) {
                    const bidButton = document.createElement('button');
                    bidButton.type = 'button';
                    bidButton.className = 'bid-btn';
                    bidButton.dataset.player = player;
                    bidButton.dataset.bid = bidValue;
                    bidButton.textContent = bidValue;
                    
                    const currentBid = gameState.bids[player] || 0;
                    const isSelected = currentBid === bidValue;
                    
                    bidButton.style.cssText = `
                        width: 45px;
                        height: 45px;
                        border-radius: 50%;
                        border: ${isSelected ? '4px solid var(--success)' : '3px solid var(--primary)'};
                        background: ${isSelected ? 'linear-gradient(145deg, var(--success), #45a049)' : 'linear-gradient(145deg, var(--light), #e8d5f2)'};
                        color: ${isSelected ? 'white' : 'var(--primary)'};
                        font-size: 1.1rem;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        box-shadow: ${isSelected ? '0 6px 16px rgba(76, 175, 80, 0.5), 0 0 0 2px rgba(76, 175, 80, 0.3)' : '0 4px 8px rgba(106, 27, 154, 0.2)'};
                        position: relative;
                        overflow: hidden;
                        transform: ${isSelected ? 'scale(1.1)' : 'scale(1)'};
                        animation: ${isSelected ? 'bidSelected 2s ease-in-out infinite' : 'none'};
                    `;
                    
                    // Add hover effect
                    bidButton.addEventListener('mouseenter', function() {
                        if (!isSelected) {
                            this.style.background = 'linear-gradient(145deg, var(--primary), var(--secondary))';
                            this.style.color = 'white';
                            this.style.transform = 'translateY(-3px) scale(1.05)';
                            this.style.boxShadow = '0 6px 12px rgba(106, 27, 154, 0.4)';
                        }
                    });
                    
                    bidButton.addEventListener('mouseleave', function() {
                        if (!isSelected) {
                            this.style.background = 'linear-gradient(145deg, var(--light), #e8d5f2)';
                            this.style.color = 'var(--primary)';
                            this.style.transform = 'translateY(0) scale(1)';
                            this.style.boxShadow = '0 4px 8px rgba(106, 27, 154, 0.2)';
                        }
                    });
                    
                    // Add click handler
                    bidButton.addEventListener('click', function() {
                        const playerName = this.dataset.player;
                        const selectedBid = parseInt(this.dataset.bid);
                        
                        // Update game state
                        gameState.bids[playerName] = selectedBid;
                        
                        // Update all buttons for this player
                        const allPlayerButtons = bidButtonContainer.querySelectorAll('.bid-btn');
                        allPlayerButtons.forEach(btn => {
                            const btnBid = parseInt(btn.dataset.bid);
                            const isBtnSelected = btnBid === selectedBid;
                            
                            btn.style.border = isBtnSelected ? '4px solid var(--success)' : '3px solid var(--primary)';
                            btn.style.background = isBtnSelected ? 
                                'linear-gradient(145deg, var(--success), #45a049)' : 
                                'linear-gradient(145deg, var(--light), #e8d5f2)';
                            btn.style.color = isBtnSelected ? 'white' : 'var(--primary)';
                            btn.style.transform = isBtnSelected ? 'scale(1.1)' : 'translateY(0) scale(1)';
                            btn.style.boxShadow = isBtnSelected ? 
                                '0 6px 16px rgba(76, 175, 80, 0.5), 0 0 0 2px rgba(76, 175, 80, 0.3)' : 
                                '0 4px 8px rgba(106, 27, 154, 0.2)';
                            btn.style.animation = isBtnSelected ? 'bidSelected 2s ease-in-out infinite' : 'none';
                        });
                        
                        // Update bid total
                        updateBidTotal();
                    });
                    
                    bidButtonContainer.appendChild(bidButton);
                }
                
                playerCard.appendChild(bidButtonContainer);
                bidInputs.appendChild(playerCard);
            });
            
            // Add real-time bid total display
            const totalDisplay = document.createElement('div');
            totalDisplay.id = 'bidTotalDisplay';
            totalDisplay.style.cssText = `
                margin-top: 20px;
                padding: 15px;
                background: linear-gradient(135deg, var(--accent), #ffb74d);
                color: white;
                border-radius: 12px;
                text-align: center;
                font-weight: bold;
                font-size: 1.1rem;
                box-shadow: 0 4px 8px rgba(255, 171, 0, 0.3);
                border: 2px solid var(--accent);
            `;
            totalDisplay.textContent = 'Total Bids: 0';
            bidInputs.appendChild(totalDisplay);
            
            // Initialize total display
            updateBidTotal();
        }
        
        // Update bid total display
        function updateBidTotal() {
            let total = 0;
            let allValid = true;
            
            // Get bids from gameState instead of input fields
            gameState.players.forEach(player => {
                const bid = gameState.bids[player] || 0;
                total += bid;
            });
            
            allValid = true; // All bids are valid since they're selected from buttons
            
            const totalDisplay = document.getElementById('bidTotalDisplay');
            if (totalDisplay) {
                if (total === gameState.currentRound) {
                    totalDisplay.style.background = 'linear-gradient(135deg, var(--danger), #d32f2f)';
                    totalDisplay.style.borderColor = 'var(--danger)';
                    totalDisplay.innerHTML = `üö´ <strong>Total Bids: ${total}</strong><br><em>INVALID - Cannot equal round ${gameState.currentRound}</em>`;
                    totalDisplay.style.animation = 'pulse 0.5s ease-in-out';
                } else if (allValid) {
                    totalDisplay.style.background = 'linear-gradient(135deg, var(--success), #45a049)';
                    totalDisplay.style.borderColor = 'var(--success)';
                    totalDisplay.innerHTML = `‚úÖ <strong>Total Bids: ${total}</strong><br><em>Valid - Ready to play!</em>`;
                    totalDisplay.style.animation = 'none';
                } else {
                    totalDisplay.style.background = 'linear-gradient(135deg, var(--accent), #ffb74d)';
                    totalDisplay.style.borderColor = 'var(--accent)';
                    totalDisplay.innerHTML = `üé≤ <strong>Total Bids: ${total}</strong>`;
                    totalDisplay.style.animation = 'none';
                }
            }
        }

        // Submit bids
        function submitBids() {
            let totalBids = 0;
            
            // Collect bids from gameState (already validated by button selection)
            gameState.players.forEach(player => {
                const bid = gameState.bids[player] || 0;
                totalBids += bid;
            });
            
            // Check that total bids doesn't equal the round number
            if (totalBids === gameState.currentRound) {
                // Highlight all bid buttons to show the issue
                const allBidButtons = document.querySelectorAll('.bid-btn');
                allBidButtons.forEach(button => {
                    button.style.borderColor = 'var(--danger)';
                    button.style.boxShadow = '0 4px 8px rgba(244, 67, 54, 0.4)';
                });
                
                // Show a more detailed error message
                const errorMsg = `üö´ Invalid Bids! üö´\n\n` +
                               `The sum of all bids (${totalBids}) cannot equal the round number (${gameState.currentRound}).\n\n` +
                               `This is a fundamental Wizard rule: at least one player must bid differently.\n\n` +
                               `Please adjust your bids and try again.`;
                
                showNotification(errorMsg, 'error', 8000);
                
                // Clear the highlighting after a delay
                setTimeout(() => {
                    allBidButtons.forEach(button => {
                        button.style.borderColor = 'var(--primary)';
                        button.style.boxShadow = '0 4px 8px rgba(106, 27, 154, 0.2)';
                    });
                }, 3000);
                
                return;
            }
            
            // Switch to playing phase
            gameState.gamePhase = 'playing';
            showPlayingPhase();
            saveGame();
            
            // Show success notification
            showNotification('üéØ Bids submitted successfully! Time to play and record tricks!', 'success', 4000);
        }

        // Show playing phase UI
        function showPlayingPhase() {
            document.getElementById('biddingPhase').style.display = 'none';
            document.getElementById('playingPhase').style.display = 'block';
            submitBidsBtn.style.display = 'none';
            calculateRoundBtn.style.display = 'inline-block';
            
            // Create trick inputs
            trickInputs.innerHTML = '';
            
            gameState.players.forEach((player, index) => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-trick-card';
                playerCard.style.cssText = `
                    background: linear-gradient(135deg, ${index % 2 === 0 ? '#f8f9fa' : '#e8f5e8'}, ${index % 2 === 0 ? '#e9ecef' : '#d4edda'});
                    border: 2px solid ${index % 2 === 0 ? 'var(--primary)' : 'var(--success)'};
                    border-radius: 15px;
                    padding: 20px;
                    margin-bottom: 20px;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                    transition: all 0.3s ease;
                `;
                
                const playerHeader = document.createElement('div');
                playerHeader.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 15px;
                    padding-bottom: 10px;
                    border-bottom: 2px solid rgba(106, 27, 154, 0.2);
                `;
                
                const playerName = document.createElement('h4');
                playerName.textContent = `üë§ ${player}`;
                playerName.style.cssText = `
                    margin: 0;
                    color: var(--primary);
                    font-size: 1.2rem;
                    font-weight: bold;
                `;
                
                const bidInfo = document.createElement('div');
                bidInfo.textContent = `Bid: ${gameState.bids[player] || 0}`;
                bidInfo.style.cssText = `
                    background: linear-gradient(135deg, var(--accent), #ffb74d);
                    color: white;
                    padding: 5px 12px;
                    border-radius: 20px;
                    font-weight: bold;
                    font-size: 0.9rem;
                    box-shadow: 0 2px 4px rgba(255, 171, 0, 0.3);
                `;
                
                playerHeader.appendChild(playerName);
                playerHeader.appendChild(bidInfo);
                playerCard.appendChild(playerHeader);
                
                const trickLabel = document.createElement('div');
                trickLabel.textContent = 'üéØ Tricks Won:';
                trickLabel.style.cssText = `
                    font-weight: bold;
                    color: var(--text);
                    margin-bottom: 12px;
                    font-size: 1rem;
                `;
                playerCard.appendChild(trickLabel);
                
                const buttonContainer = document.createElement('div');
                buttonContainer.style.cssText = `
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                    justify-content: center;
                `;
                
                // Create trick buttons (0 to current round)
                for (let i = 0; i <= gameState.currentRound; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'trick-btn';
                    btn.textContent = i;
                    btn.dataset.player = player;
                    btn.dataset.tricks = i;
                    
                    if (gameState.tricks[player] === i) {
                        btn.classList.add('active');
                    }
                    
                    btn.addEventListener('click', function() {
                        // Remove active class from all buttons for this player
                        document.querySelectorAll(`.trick-btn[data-player="${player}"]`).forEach(b => {
                            b.classList.remove('active');
                        });
                        
                        // Add active class to clicked button
                        this.classList.add('active');
                        gameState.tricks[player] = i;
                        
                        // Add visual feedback
                        this.style.animation = 'none';
                        setTimeout(() => {
                            this.style.animation = 'trickSelected 0.3s ease-out';
                        }, 10);
                        
                        saveGame();
                        
                        // Update bid info with visual comparison
                        const bid = gameState.bids[player] || 0;
                        const tricks = i;
                        if (bid === tricks) {
                            bidInfo.style.background = 'linear-gradient(135deg, var(--success), #45a049)';
                            bidInfo.textContent = `Bid: ${bid} ‚úì Perfect!`;
                        } else {
                            bidInfo.style.background = 'linear-gradient(135deg, var(--danger), #d32f2f)';
                            bidInfo.textContent = `Bid: ${bid} ‚úó Got ${tricks}`;
                        }
                    });
                    
                    buttonContainer.appendChild(btn);
                }
                
                playerCard.appendChild(buttonContainer);
                trickInputs.appendChild(playerCard);
            });
        }

        // Calculate round scores
        function calculateRound() {
            let allValid = true;
            
            // Check all players have tricks recorded
            gameState.players.forEach(player => {
                if (gameState.tricks[player] === undefined) {
                    allValid = false;
                }
            });
            
            if (!allValid) {
                showNotification('Please record tricks for all players!', 'error', 4000);
                return;
            }
            
            // Validate that sum of tricks equals round number
            const totalTricks = gameState.players.reduce((sum, player) => sum + gameState.tricks[player], 0);
            if (totalTricks !== gameState.currentRound) {
                showNotification(`Invalid trick count! Total tricks won (${totalTricks}) must equal the round number (${gameState.currentRound}). Please check your trick recordings.`, 'error', 6000);
                
                // Highlight trick buttons in red to show error
                const trickButtons = document.querySelectorAll('.trick-btn');
                trickButtons.forEach(btn => {
                    btn.style.borderColor = 'var(--danger)';
                    btn.style.boxShadow = '0 4px 8px rgba(244, 67, 54, 0.4)';
                });
                
                // Clear highlighting after 3 seconds
                setTimeout(() => {
                    trickButtons.forEach(btn => {
                        btn.style.borderColor = '';
                        btn.style.boxShadow = '';
                    });
                }, 3000);
                
                return;
            }
            
            // Calculate scores based on game mode
            gameState.players.forEach(player => {
                const bid = gameState.bids[player];
                const tricks = gameState.tricks[player];
                
                let points = 0;
                
                switch (gameState.gameMode) {
                    case 'classic':
                        if (bid === tricks) {
                            points = 20 + (10 * bid);
                        } else {
                            points = -10 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'quick':
                        if (bid === tricks) {
                            points = 15 + (8 * bid);
                        } else {
                            points = -8 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'expert':
                        if (bid === tricks) {
                            points = 25 + (12 * bid);
                        } else {
                            points = -15 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'team':
                        if (bid === tricks) {
                            points = 20 + (10 * bid);
                        } else {
                            points = -10 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    case 'tournament':
                        if (bid === tricks) {
                            points = 30 + (15 * bid);
                        } else {
                            points = -20 * Math.abs(bid - tricks);
                        }
                        break;
                        
                    default:
                        if (bid === tricks) {
                            points = 20 + (10 * bid);
                        } else {
                            points = -10 * Math.abs(bid - tricks);
                        }
                }
                
                gameState.scores[player] += points;
            });
            
            // Update UI
            updateScoreboard();
            
            // Check if game is over
            if (gameState.currentRound >= gameState.totalRound) {
                declareWinner();
            } else {
                nextRoundBtn.style.display = 'inline-block';
                calculateRoundBtn.style.display = 'none';
            }
            
            saveGame();
            
            // Show success notification
            showNotification('üéâ Round completed! Scores updated successfully!', 'success', 4000);
        }

        // Advance to next round
        function nextRound() {
            gameState.currentRound++;
            gameState.gamePhase = 'bidding';
            gameState.bids = {};
            gameState.tricks = {};
            
            // Update UI
            currentRoundEl.textContent = gameState.currentRound;
            updateScoreboard();
            createBidInputs();
            
            document.getElementById('biddingPhase').style.display = 'block';
            document.getElementById('playingPhase').style.display = 'none';
            submitBidsBtn.style.display = 'inline-block';
            calculateRoundBtn.style.display = 'none';
            nextRoundBtn.style.display = 'none';
            
            saveGame();
            
            // Show success notification
            showNotification('üîÑ Next round started! Good luck!', 'success', 3000);
        }

        // End game and reset scores/bids
        function endGame() {
            // Reset scores and bids but keep players and game structure
            gameState.scores = {};
            gameState.bids = {};
            gameState.tricks = {};
            gameState.currentRound = 1;
            gameState.gamePhase = 'bidding';
            gameState.gameStarted = false;
            
            // Clear localStorage
            localStorage.removeItem('wizardGame');
            
            // Hide game end elements
            winnerBanner.style.display = 'none';
            gameEndActions.style.display = 'none';
            
            // Reset UI
            currentRoundEl.textContent = '1';
            updateScoreboard();
            
            // Show bidding phase
            document.getElementById('biddingPhase').style.display = 'block';
            document.getElementById('playingPhase').style.display = 'none';
            submitBidsBtn.style.display = 'inline-block';
            calculateRoundBtn.style.display = 'none';
            nextRoundBtn.style.display = 'none';
            
            // Create new bid inputs
            createBidInputs();
            
            // Show setup section to start a new game
            showSection('setup');
            
            // Show success notification
            showNotification('üîÑ Game ended and scores reset! Ready for a new game!', 'success', 4000);
        }

                 // Clear game and start fresh
         function clearGame() {
             // Reset game state
             gameState.players = [];
             gameState.currentRound = 1;
             gameState.totalRounds = 10;
             gameState.bids = {};
             gameState.tricks = {};
             gameState.scores = {};
             gameState.gamePhase = 'bidding';
             gameState.gameStarted = false;
             
             // Clear localStorage
             localStorage.removeItem('wizardGame');
             
             // Hide game end elements
             winnerBanner.style.display = 'none';
             gameEndActions.style.display = 'none';
             
             // Reset UI
             currentRoundEl.textContent = '1';
             totalRoundsEl.textContent = '10';
             
             // Clear player inputs
             const playerInputs = document.querySelectorAll('.player-input input');
             playerInputs.forEach(input => {
                 input.value = '';
             });
             
             // Reset game mode selection
             handleGameModeSelection('classic');
             
                         // Show setup section
            showSection('setup');
            
            // Show success notification
            showNotification('‚ú® Game cleared! Ready to start a fresh adventure!', 'success', 4000);
         }
         
         // Declare winner when game ends
         function declareWinner() {
             let highestScore = -Infinity;
             let winners = [];
             
             gameState.players.forEach(player => {
                 if (gameState.scores[player] > highestScore) {
                     highestScore = gameState.scores[player];
                     winners = [player];
                 } else if (gameState.scores[player] === highestScore) {
                     winners.push(player);
                 }
             });
             
             if (winners.length === 1) {
                 winnerBanner.textContent = `üèÜ Winner: ${winners[0]} with ${highestScore} points! üèÜ`;
             } else {
                 winnerBanner.textContent = `üèÜ Tie between ${winners.join(' and ')} with ${highestScore} points each! üèÜ`;
             }
             
             winnerBanner.style.display = 'block';
             gameEndActions.style.display = 'block';
             nextRoundBtn.style.display = 'none';
             
             // Clear saved game
             localStorage.removeItem('wizardGame');
         }

        // Event listeners
        modeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const mode = this.dataset.mode;
                showSection(mode);
            });
        });

                 addPlayerBtn.addEventListener('click', addPlayerInput);
         startGameBtn.addEventListener('click', startGame);
         submitBidsBtn.addEventListener('click', submitBids);
         calculateRoundBtn.addEventListener('click', calculateRound);
         nextRoundBtn.addEventListener('click', nextRound);
         clearGameBtn.addEventListener('click', clearGame);
         endGameBtn.addEventListener('click', endGame);
         roundsSelect.addEventListener('change', handleRoundsSelection);
        
                 // Add event listeners for mode cards
         modeCards.forEach(card => {
             card.addEventListener('click', function() {
                 const selectedMode = this.dataset.mode;
                 handleGameModeSelection(selectedMode);
             });
         });
         
         // Add event listeners for help buttons
         helpBtns.forEach(btn => {
             btn.addEventListener('click', function(e) {
                 e.stopPropagation(); // Prevent card selection when clicking help
                 const mode = this.dataset.mode;
                 showHelp(mode);
             });
         });
         
         // Modal event listeners
         closeModal.addEventListener('click', closeHelp);
         helpModal.addEventListener('click', function(e) {
             if (e.target === helpModal) {
                 closeHelp();
             }
         });
        backToGameBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                if (gameState.gameStarted) {
                    showSection('play');
                } else {
                    showSection('setup');
                }
            });
        });

                 // Help content for each game mode
         const helpContent = {
             classic: {
                 title: "Classic Wizard",
                 content: `
                     <h4>üéØ The Original Experience</h4>
                     <p>This is the traditional Wizard scoring system that balances risk and reward.</p>
                     
                     <h4>üìä Scoring System</h4>
                     <ul>
                         <li><strong>Correct Bid:</strong> 20 base points + 10 points per trick won</li>
                         <li><strong>Incorrect Bid:</strong> Lose 10 points for each trick over or under</li>
                     </ul>
                     
                     <div class="example-box">
                         <strong>Examples:</strong><br>
                         ‚Ä¢ Bid 3, win 3 tricks ‚Üí <strong>50 points</strong> (20 + 30)<br>
                         ‚Ä¢ Bid 2, win 4 tricks ‚Üí <strong>-20 points</strong> (10 √ó -2)<br>
                         ‚Ä¢ Bid 0, win 0 tricks ‚Üí <strong>20 points</strong> (20 + 0)
                     </div>
                     
                     <h4>üéÆ Perfect For</h4>
                     <p>New players and those who want the authentic Wizard experience with balanced scoring.</p>
                 `
             },
             quick: {
                 title: "Quick Play",
                 content: `
                     <h4>‚ö° Fast & Furious</h4>
                     <p>A faster-paced version with quicker scoring and shorter games.</p>
                     
                     <h4>üìä Scoring System</h4>
                     <ul>
                         <li><strong>Correct Bid:</strong> 15 base points + 8 points per trick won</li>
                         <li><strong>Incorrect Bid:</strong> Lose 8 points for each trick over or under</li>
                     </ul>
                     
                     <div class="example-box">
                         <strong>Examples:</strong><br>
                         ‚Ä¢ Bid 3, win 3 tricks ‚Üí <strong>39 points</strong> (15 + 24)<br>
                         ‚Ä¢ Bid 2, win 4 tricks ‚Üí <strong>-16 points</strong> (8 √ó -2)<br>
                         ‚Ä¢ Bid 0, win 0 tricks ‚Üí <strong>15 points</strong> (15 + 0)
                     </div>
                     
                     <h4>üéÆ Perfect For</h4>
                     <p>Quick gaming sessions and players who want faster-paced games with less dramatic score swings.</p>
                 `
             },
             expert: {
                 title: "Expert Mode",
                 content: `
                     <h4>üßô‚Äç‚ôÇÔ∏è High Stakes Wizardry</h4>
                     <p>For experienced players who want bigger rewards and bigger risks.</p>
                     
                     <h4>üìä Scoring System</h4>
                     <ul>
                         <li><strong>Correct Bid:</strong> 25 base points + 12 points per trick won</li>
                         <li><strong>Incorrect Bid:</strong> Lose 15 points for each trick over or under</li>
                     </ul>
                     
                     <div class="example-box">
                         <strong>Examples:</strong><br>
                         ‚Ä¢ Bid 3, win 3 tricks ‚Üí <strong>61 points</strong> (25 + 36)<br>
                         ‚Ä¢ Bid 2, win 4 tricks ‚Üí <strong>-30 points</strong> (15 √ó -2)<br>
                         ‚Ä¢ Bid 0, win 0 tricks ‚Üí <strong>25 points</strong> (25 + 0)
                     </div>
                     
                     <h4>üéÆ Perfect For</h4>
                     <p>Experienced players who want more dramatic score swings and higher stakes gameplay.</p>
                 `
             },
             team: {
                 title: "Team Play",
                 content: `
                     <h4>ü§ù Unite & Conquer</h4>
                     <p>Play in teams with shared scoring and collaborative strategy.</p>
                     
                     <h4>üìä Scoring System</h4>
                     <ul>
                         <li><strong>Correct Bid:</strong> 20 base points + 10 points per trick won</li>
                         <li><strong>Incorrect Bid:</strong> Lose 10 points for each trick over or under</li>
                         <li><strong>Team Scoring:</strong> Team members share the same score</li>
                     </ul>
                     
                     <div class="example-box">
                         <strong>Examples:</strong><br>
                         ‚Ä¢ Team A: Both bid 2, both win 2 ‚Üí <strong>50 points each</strong><br>
                         ‚Ä¢ Team B: Both bid 1, one wins 2, one wins 0 ‚Üí <strong>-10 points each</strong><br>
                         ‚Ä¢ Team coordination is key to success!
                     </div>
                     
                     <h4>üéÆ Perfect For</h4>
                     <p>Groups who want to work together and enjoy collaborative gameplay with shared victories.</p>
                 `
             },
             tournament: {
                 title: "Tournament",
                 content: `
                     <h4>üèÜ Ultimate Challenge</h4>
                     <p>The highest stakes mode with maximum scoring potential and risk.</p>
                     
                     <h4>üìä Scoring System</h4>
                     <ul>
                         <li><strong>Correct Bid:</strong> 30 base points + 15 points per trick won</li>
                         <li><strong>Incorrect Bid:</strong> Lose 20 points for each trick over or under</li>
                     </ul>
                     
                     <div class="example-box">
                         <strong>Examples:</strong><br>
                         ‚Ä¢ Bid 3, win 3 tricks ‚Üí <strong>75 points</strong> (30 + 45)<br>
                         ‚Ä¢ Bid 2, win 4 tricks ‚Üí <strong>-40 points</strong> (20 √ó -2)<br>
                         ‚Ä¢ Bid 0, win 0 tricks ‚Üí <strong>30 points</strong> (30 + 0)
                     </div>
                     
                     <h4>üéÆ Perfect For</h4>
                     <p>Competitive players and tournaments where dramatic score swings create exciting gameplay.</p>
                 `
             }
         };
         
         // Show help modal
         function showHelp(mode) {
             const content = helpContent[mode];
             if (content) {
                 modalTitle.textContent = content.title;
                 modalContent.innerHTML = content.content;
                 helpModal.style.display = 'flex';
             }
         }
         
         // Close help modal
         function closeHelp() {
             helpModal.style.display = 'none';
         }
         
         // Initialize
         loadGame();
         
         // Set default mode selection
         handleGameModeSelection('classic');
    </script>
    
    <!-- Credit Section -->
    <div style="
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        background: linear-gradient(145deg, var(--light), #e8d5f2);
        border-radius: 15px;
        border: 2px solid var(--primary);
        box-shadow: 0 4px 12px rgba(106, 27, 154, 0.2);
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    ">
        <div style="
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        ">
            Made by Slim Bel Abria
        </div>
    </div>
</body>
</html>